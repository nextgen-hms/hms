<?xml version="1.0" encoding="UTF-8"?>
<!--
CAUTION: Do not modify this file unless you know what you are doing.
 Unexpected results may occur if the code is changed deliberately.
-->
<dbmodel pgmodeler-ver="2.0.0-alpha" use-changelog="false" max-obj-count="84"
	 gen-disabled-objs-code="false" show-sys-schemas-rects="true"
	 last-position="-300,1249" last-zoom="0.6" scene-rect="-2088,0,4598.77,5127.32"
	 default-schema="public" default-owner="postgres"
	 layers="Default layer"
	 active-layers="0"
	 layer-name-colors="#000000"
	 layer-rect-colors="#b4b4b4"
	 show-layer-names="false" show-layer-rects="false">
<role name="hms_owner"
 superuser="true"
 inherit="true"
 login="true"
 password="********">
</role>

<database name="hms" encoding="UTF8" lc-collate="en_US.UTF-8" lc-ctype="en_US.UTF-8" is-template="false" allow-conns="true">
	<role name="hms_owner"/>
	<tablespace name="pg_default"/>
</database>

<schema name="public" layers="0" rect-visible="true" fill-color="#e1e1e1" name-color="#000000" sql-disabled="true">
</schema>

<function name="check_stock_available"
		window-func="false"
		returns-setof="false"
		behavior-type="CALLED ON NULL INPUT"
		function-type="VOLATILE"
		security-type="SECURITY INVOKER"
		parallel-type="PARALLEL UNSAFE"
		execution-cost="100"
		row-amount="0">
	<schema name="public"/>
	<role name="postgres"/>
	<language name="plpgsql"/>
	<return-type>
	<type name="boolean" length="0"/>
	</return-type>
	<parameter name="p_medicine_id">
		<type name="integer" length="0"/>
	</parameter>
	<parameter name="p_requested_qty">
		<type name="integer" length="0"/>
	</parameter>
	<parameter name="p_requested_sub_qty" default-value="0">
		<type name="integer" length="0"/>
	</parameter>
	<definition> <![CDATA[DECLARE
    v_stock_qty INTEGER;
    v_sub_qty INTEGER;
    v_sub_units_per_unit INTEGER;
    v_total_available_sub_units INTEGER;
    v_total_requested_sub_units INTEGER;
BEGIN
    SELECT 
        stock_quantity, 
        stock_sub_quantity, 
        sub_units_per_unit
    INTO 
        v_stock_qty, 
        v_sub_qty, 
        v_sub_units_per_unit
    FROM medicine
    WHERE medicine_id = p_medicine_id;
    
    -- Handle medicines without sub-units
    IF v_sub_units_per_unit IS NULL OR v_sub_units_per_unit = 0 THEN
        v_sub_units_per_unit := 1;
    END IF;
    
    -- Convert everything to sub-units for comparison
    v_total_available_sub_units := (v_stock_qty * v_sub_units_per_unit) + COALESCE(v_sub_qty, 0);
    v_total_requested_sub_units := (p_requested_qty * v_sub_units_per_unit) + COALESCE(p_requested_sub_qty, 0);
    
    RETURN v_total_available_sub_units >= v_total_requested_sub_units;
END;]]> </definition>
</function>

<function name="fn_tg_purchase_detail_to_txn"
		window-func="false"
		returns-setof="false"
		behavior-type="CALLED ON NULL INPUT"
		function-type="VOLATILE"
		security-type="SECURITY INVOKER"
		parallel-type="PARALLEL UNSAFE"
		execution-cost="100"
		row-amount="0">
	<schema name="public"/>
	<role name="postgres"/>
	<language name="plpgsql"/>
	<return-type>
	<type name="trigger" length="0"/>
	</return-type>
	<definition> <![CDATA[BEGIN
  IF TG_OP = 'INSERT' THEN
    INSERT INTO medicine_transaction(
      medicine_id, 
      txn_type, 
      quantity, 
      sub_quantity,
      amount_per_unit, 
      ref_purchase_id
    )
    VALUES (
      NEW.medicine_id, 
      'purchase', 
      NEW.quantity,
      COALESCE(NEW.sub_quantity, 0),
      NEW.unit_cost, 
      NEW.purchase_id
    );

  ELSIF TG_OP = 'UPDATE' THEN
    UPDATE medicine_transaction
    SET quantity = NEW.quantity,
        sub_quantity = COALESCE(NEW.sub_quantity, 0),
        amount_per_unit = NEW.unit_cost
    WHERE ref_purchase_id = NEW.purchase_id
      AND medicine_id = NEW.medicine_id
      AND txn_type = 'purchase';

  ELSIF TG_OP = 'DELETE' THEN
    DELETE FROM medicine_transaction
    WHERE ref_purchase_id = OLD.purchase_id
      AND medicine_id = OLD.medicine_id
      AND txn_type = 'purchase';
  END IF;

  RETURN COALESCE(NEW, OLD);
END;]]> </definition>
</function>

<function name="fn_tg_purchase_return_detail_to_txn"
		window-func="false"
		returns-setof="false"
		behavior-type="CALLED ON NULL INPUT"
		function-type="VOLATILE"
		security-type="SECURITY INVOKER"
		parallel-type="PARALLEL UNSAFE"
		execution-cost="100"
		row-amount="0">
	<schema name="public"/>
	<role name="postgres"/>
	<language name="plpgsql"/>
	<return-type>
	<type name="trigger" length="0"/>
	</return-type>
	<definition> <![CDATA[BEGIN
  IF TG_OP = 'INSERT' THEN
    INSERT INTO medicine_transaction(
      medicine_id, 
      txn_type, 
      quantity, 
      sub_quantity,
      amount_per_unit, 
      ref_purchase_return_id
    )
    VALUES (
      NEW.medicine_id, 
      'purchase_return', 
      NEW.quantity,
      COALESCE(NEW.sub_quantity, 0),
      NEW.unit_cost, 
      NEW.purchase_return_id
    );

  ELSIF TG_OP = 'UPDATE' THEN
    UPDATE medicine_transaction
    SET medicine_id = NEW.medicine_id,
        quantity = NEW.quantity,
        sub_quantity = COALESCE(NEW.sub_quantity, 0),
        amount_per_unit = NEW.unit_cost
    WHERE ref_purchase_return_id = OLD.purchase_return_id
      AND medicine_id = OLD.medicine_id
      AND txn_type = 'purchase_return';

  ELSIF TG_OP = 'DELETE' THEN
    DELETE FROM medicine_transaction
    WHERE ref_purchase_return_id = OLD.purchase_return_id
      AND medicine_id = OLD.medicine_id
      AND txn_type = 'purchase_return';
  END IF;

  RETURN COALESCE(NEW, OLD);
END;]]> </definition>
</function>

<function name="fn_tg_sale_detail_to_txn"
		window-func="false"
		returns-setof="false"
		behavior-type="CALLED ON NULL INPUT"
		function-type="VOLATILE"
		security-type="SECURITY INVOKER"
		parallel-type="PARALLEL UNSAFE"
		execution-cost="100"
		row-amount="0">
	<schema name="public"/>
	<role name="postgres"/>
	<language name="plpgsql"/>
	<return-type>
	<type name="trigger" length="0"/>
	</return-type>
	<definition> <![CDATA[BEGIN
  IF TG_OP = 'INSERT' THEN
    INSERT INTO medicine_transaction(
      medicine_id, 
      txn_type, 
      quantity, 
      sub_quantity,
      amount_per_unit, 
      ref_sale_id
    )
    VALUES (
      NEW.medicine_id, 
      'sale', 
      NEW.qty,
      COALESCE(NEW.sub_quantity, 0),
      NEW.unit_price, 
      NEW.sale_id
    );
  
  ELSIF TG_OP = 'UPDATE' THEN
    UPDATE medicine_transaction
    SET quantity = NEW.qty,
        sub_quantity = COALESCE(NEW.sub_quantity, 0),
        amount_per_unit = NEW.unit_price
    WHERE ref_sale_id = NEW.sale_id
      AND medicine_id = NEW.medicine_id
      AND txn_type = 'sale';

  ELSIF TG_OP = 'DELETE' THEN
    DELETE FROM medicine_transaction
    WHERE ref_sale_id = OLD.sale_id
      AND medicine_id = OLD.medicine_id
      AND txn_type = 'sale';
  END IF;

  RETURN NULL;
END;]]> </definition>
</function>

<function name="fn_tg_sale_return_detail_to_txn"
		window-func="false"
		returns-setof="false"
		behavior-type="CALLED ON NULL INPUT"
		function-type="VOLATILE"
		security-type="SECURITY INVOKER"
		parallel-type="PARALLEL UNSAFE"
		execution-cost="100"
		row-amount="0">
	<schema name="public"/>
	<role name="postgres"/>
	<language name="plpgsql"/>
	<return-type>
	<type name="trigger" length="0"/>
	</return-type>
	<definition> <![CDATA[BEGIN
  IF TG_OP = 'INSERT' THEN
    INSERT INTO medicine_transaction(
      medicine_id,
      txn_type,
      quantity,
      sub_quantity,
      amount_per_unit,
      ref_sale_return
    )
    VALUES (
      NEW.medicine_id,
      'sale_return',
      NEW.qty,
      COALESCE(NEW.sub_quantity, 0),
      NEW.unit_price,
      NEW.return_id
    );
  
  ELSIF TG_OP = 'UPDATE' THEN
    UPDATE medicine_transaction
    SET quantity = NEW.qty,
        sub_quantity = COALESCE(NEW.sub_quantity, 0),
        amount_per_unit = NEW.unit_price
    WHERE ref_sale_return = NEW.return_id
      AND medicine_id = NEW.medicine_id
      AND txn_type = 'sale_return';

  ELSIF TG_OP = 'DELETE' THEN
    DELETE FROM medicine_transaction
    WHERE ref_sale_return = OLD.return_id
      AND medicine_id = OLD.medicine_id
      AND txn_type = 'sale_return';
  END IF;

  RETURN NEW;
END;]]> </definition>
</function>

<function name="fn_tg_stockquantity_generic"
		window-func="false"
		returns-setof="false"
		behavior-type="CALLED ON NULL INPUT"
		function-type="VOLATILE"
		security-type="SECURITY INVOKER"
		parallel-type="PARALLEL UNSAFE"
		execution-cost="100"
		row-amount="0">
	<schema name="public"/>
	<role name="postgres"/>
	<language name="plpgsql"/>
	<return-type>
	<type name="trigger" length="0"/>
	</return-type>
	<definition> <![CDATA[DECLARE
    v_sign INTEGER;
    v_sub_units_per_unit INTEGER;
    v_total_sub_units_change INTEGER;
    v_current_stock INTEGER;
    v_current_sub_stock INTEGER;
    v_current_total_sub_units INTEGER;
    v_new_total_sub_units INTEGER;
    v_new_full_units INTEGER;
    v_new_sub_units INTEGER;
BEGIN
    -- Get medicine configuration and current stock
    SELECT sub_units_per_unit, stock_quantity, stock_sub_quantity
    INTO v_sub_units_per_unit, v_current_stock, v_current_sub_stock
    FROM medicine 
    WHERE medicine_id = COALESCE(NEW.medicine_id, OLD.medicine_id);
    
    -- Handle medicines without sub-units (default to 1)
    IF v_sub_units_per_unit IS NULL OR v_sub_units_per_unit = 0 THEN
        v_sub_units_per_unit := 1;
    END IF;
    
    -- Determine sign based on transaction type
    IF NEW.txn_type = 'purchase' THEN 
        v_sign := 1;
    ELSIF NEW.txn_type = 'sale' THEN
        v_sign := -1;
    ELSIF NEW.txn_type = 'purchase_return' THEN 
        v_sign := -1;
    ELSIF NEW.txn_type = 'sale_return' THEN
        v_sign := 1;
    ELSE
        RAISE EXCEPTION 'Unknown txn_type: %', NEW.txn_type;
    END IF;

    IF TG_OP = 'INSERT' THEN
        -- Convert transaction to total sub-units
        v_total_sub_units_change := (NEW.quantity * v_sub_units_per_unit) + COALESCE(NEW.sub_quantity, 0);
        
        -- Calculate current total sub-units in stock
        v_current_total_sub_units := (v_current_stock * v_sub_units_per_unit) + COALESCE(v_current_sub_stock, 0);
        
        -- Apply the change
        v_new_total_sub_units := v_current_total_sub_units + (v_sign * v_total_sub_units_change);
        
        -- Split back into full units and remaining sub-units
        v_new_full_units := v_new_total_sub_units / v_sub_units_per_unit;
        v_new_sub_units := v_new_total_sub_units % v_sub_units_per_unit;
        
        -- Update stock
        UPDATE medicine 
        SET stock_quantity = v_new_full_units,
            stock_sub_quantity = v_new_sub_units
        WHERE medicine_id = NEW.medicine_id;

    ELSIF TG_OP = 'DELETE' THEN
        -- Convert OLD transaction to total sub-units
        v_total_sub_units_change := (OLD.quantity * v_sub_units_per_unit) + COALESCE(OLD.sub_quantity, 0);
        
        v_current_total_sub_units := (v_current_stock * v_sub_units_per_unit) + COALESCE(v_current_sub_stock, 0);
        v_new_total_sub_units := v_current_total_sub_units - (v_sign * v_total_sub_units_change);
        
        v_new_full_units := v_new_total_sub_units / v_sub_units_per_unit;
        v_new_sub_units := v_new_total_sub_units % v_sub_units_per_unit;
        
        UPDATE medicine
        SET stock_quantity = v_new_full_units,
            stock_sub_quantity = v_new_sub_units
        WHERE medicine_id = OLD.medicine_id;

    ELSIF TG_OP = 'UPDATE' THEN
        -- Calculate OLD transaction effect
        v_total_sub_units_change := (OLD.quantity * v_sub_units_per_unit) + COALESCE(OLD.sub_quantity, 0);
        v_current_total_sub_units := (v_current_stock * v_sub_units_per_unit) + COALESCE(v_current_sub_stock, 0);
        
        -- Remove OLD effect
        v_current_total_sub_units := v_current_total_sub_units - (v_sign * v_total_sub_units_change);
        
        -- Calculate NEW transaction effect
        v_total_sub_units_change := (NEW.quantity * v_sub_units_per_unit) + COALESCE(NEW.sub_quantity, 0);
        
        -- Add NEW effect
        v_new_total_sub_units := v_current_total_sub_units + (v_sign * v_total_sub_units_change);
        
        v_new_full_units := v_new_total_sub_units / v_sub_units_per_unit;
        v_new_sub_units := v_new_total_sub_units % v_sub_units_per_unit;
        
        UPDATE medicine
        SET stock_quantity = v_new_full_units,
            stock_sub_quantity = v_new_sub_units
        WHERE medicine_id = NEW.medicine_id;
    END IF;

    RETURN COALESCE(NEW, OLD);
END;]]> </definition>
</function>

<function name="get_clinic_number"
		window-func="false"
		returns-setof="false"
		behavior-type="CALLED ON NULL INPUT"
		function-type="VOLATILE"
		security-type="SECURITY INVOKER"
		parallel-type="PARALLEL UNSAFE"
		execution-cost="100"
		row-amount="0">
	<schema name="public"/>
	<role name="postgres"/>
	<language name="plpgsql"/>
	<return-type>
	<type name="integer" length="0"/>
	</return-type>
	<definition> <![CDATA[declare 
	v_max_clinic_number int;
	v_next_number int;
begin 
   select max(clinic_number)
   into v_max_clinic_number
   from visit
   where
   visit_timestamp >= current_date
   and 
   visit_timestamp < current_date + interval '1 day';

   if v_max_clinic_number is null then
   		v_next_number :=1;
	else
		v_next_number := v_max_clinic_number +1;
	end if;

	return v_next_number;
	
end;]]> </definition>
</function>

<function name="get_clinic_number"
		window-func="false"
		returns-setof="false"
		behavior-type="CALLED ON NULL INPUT"
		function-type="VOLATILE"
		security-type="SECURITY INVOKER"
		parallel-type="PARALLEL UNSAFE"
		execution-cost="100"
		row-amount="0">
	<schema name="public"/>
	<role name="postgres"/>
	<language name="plpgsql"/>
	<return-type>
	<type name="integer" length="0"/>
	</return-type>
	<parameter name="p_patient_id">
		<type name="integer" length="0"/>
	</parameter>
	<definition> <![CDATA[declare 
	v_max_clinic_number int;
	v_next_number int;
begin 
   select max(clinic_number)
   into v_max_clinic_number
   from visit
   where
   visit_timestamp >= current_date
   and 
   visit_timestamp < current_date + interval '1 day';

   if v_max_clinic_number is null then
   		v_next_number :=1;
	else
		v_next_number := v_max_clinic_number +1;
	end if;

	return v_next_number;
	
end;]]> </definition>
</function>

<function name="get_stock_display"
		window-func="false"
		returns-setof="false"
		behavior-type="CALLED ON NULL INPUT"
		function-type="VOLATILE"
		security-type="SECURITY INVOKER"
		parallel-type="PARALLEL UNSAFE"
		execution-cost="100"
		row-amount="0">
	<schema name="public"/>
	<role name="postgres"/>
	<language name="plpgsql"/>
	<return-type>
	<type name="text" length="0"/>
	</return-type>
	<parameter name="p_medicine_id">
		<type name="integer" length="0"/>
	</parameter>
	<definition> <![CDATA[DECLARE
    v_stock_qty INTEGER;
    v_sub_qty INTEGER;
    v_form VARCHAR(50);
    v_sub_unit VARCHAR(20);
    v_sub_units_per_unit INTEGER;
    v_result TEXT;
BEGIN
    SELECT 
        stock_quantity, 
        stock_sub_quantity, 
        form, 
        sub_unit,
        sub_units_per_unit
    INTO 
        v_stock_qty, 
        v_sub_qty, 
        v_form, 
        v_sub_unit,
        v_sub_units_per_unit
    FROM medicine
    WHERE medicine_id = p_medicine_id;
    
    -- If no sub-units configured or no loose sub-units
    IF v_sub_units_per_unit IS NULL OR v_sub_units_per_unit = 0 OR v_sub_qty = 0 THEN
        v_result := v_stock_qty || ' ' || COALESCE(v_form, 'units');
    ELSE
        v_result := v_stock_qty || ' ' || COALESCE(v_form, 'units') || 
                    ' + ' || v_sub_qty || ' ' || COALESCE(v_sub_unit, 'sub-units');
    END IF;
    
    RETURN v_result;
END;]]> </definition>
</function>

<function name="medicine_search_vector_update"
		window-func="false"
		returns-setof="false"
		behavior-type="CALLED ON NULL INPUT"
		function-type="VOLATILE"
		security-type="SECURITY INVOKER"
		parallel-type="PARALLEL UNSAFE"
		execution-cost="100"
		row-amount="0">
	<schema name="public"/>
	<role name="postgres"/>
	<language name="plpgsql"/>
	<return-type>
	<type name="trigger" length="0"/>
	</return-type>
	<definition> <![CDATA[
BEGIN
    NEW.search_vector := 
        setweight(to_tsvector('english', COALESCE(NEW.generic_name, '')), 'A') ||
        setweight(to_tsvector('english', COALESCE(NEW.brand_name, '')), 'A') ||
        setweight(to_tsvector('english', COALESCE(NEW.category, '')), 'B');
    RETURN NEW;
END;
]]> </definition>
</function>

<procedure name="update_and_log_visit_status" security-type="SECURITY INVOKER">
	<schema name="public"/>
	<role name="postgres"/>
	<language name="plpgsql"/>
	<parameter name="p_visit_id">
		<type name="integer" length="0"/>
	</parameter>
	<parameter name="p_status">
		<type name="character varying" length="0"/>
	</parameter>
	<parameter name="p_updated_by_doctor">
		<type name="integer" length="0"/>
	</parameter>
	<parameter name="p_updated_by_staff">
		<type name="integer" length="0"/>
	</parameter>
	<definition> <![CDATA[begin
	update visit
	set status =p_status
	where visit_id =p_visit_id;

	insert into visit_status_history(visit_id,status,updated_by_staff,updated_by_doctor)
	values(
		p_visit_id,
		p_status,
		p_updated_by_doctor,
		p_updated_by_staff
	);
end;]]> </definition>
</procedure>

<sequence name="bill_bill_id_seq" cycle="false" start="1" increment="1" min-value="1" max-value="2147483647" cache="1">
	<schema name="public"/>
	<role name="postgres"/>
</sequence>

<table name="bill" layers="0" collapse-mode="2" max-obj-count="7" z-value="0">
	<schema name="public"/>
	<role name="postgres"/>
	<position x="60" y="80"/>
	<column name="bill_id" not-null="true" sequence="public.bill_bill_id_seq">
		<type name="integer" length="0"/>
	</column>
	<column name="patient_id" not-null="true">
		<type name="integer" length="0"/>
	</column>
	<column name="visit_id" not-null="true">
		<type name="integer" length="0"/>
	</column>
	<column name="total_amount">
		<type name="numeric" length="10" precision="2"/>
	</column>
	<column name="payment_status">
		<type name="character varying" length="100"/>
	</column>
	<column name="created_at" default-value="CURRENT_TIMESTAMP">
		<type name="timestamp" length="0"/>
	</column>
	<constraint name="bill_payment_status_check" type="ck-constr" table="public.bill">
			<expression> <![CDATA[((payment_status)::text = ANY (ARRAY[('Paid'::character varying)::text, ('Unpaid'::character varying)::text, ('Partial'::character varying)::text]))]]> </expression>
	</constraint>
	<constraint name="bill_pkey" type="pk-constr" table="public.bill">
		<columns names="bill_id" ref-type="src-columns"/>
	</constraint>
</table>

<sequence name="bill_item_item_id_seq" cycle="false" start="1" increment="1" min-value="1" max-value="2147483647" cache="1">
	<schema name="public"/>
	<role name="postgres"/>
</sequence>

<table name="bill_item" layers="0" collapse-mode="2" max-obj-count="7" z-value="0">
	<schema name="public"/>
	<role name="postgres"/>
	<position x="460" y="80"/>
	<column name="item_id" not-null="true" sequence="public.bill_item_item_id_seq">
		<type name="integer" length="0"/>
	</column>
	<column name="bill_id" not-null="true">
		<type name="integer" length="0"/>
	</column>
	<column name="description">
		<type name="character varying" length="255"/>
	</column>
	<column name="amount" not-null="true">
		<type name="numeric" length="10" precision="2"/>
	</column>
	<column name="quantity">
		<type name="integer" length="0"/>
	</column>
	<column name="created_at" default-value="CURRENT_TIMESTAMP">
		<type name="timestamp" length="0"/>
	</column>
	<constraint name="bill_item_pkey" type="pk-constr" table="public.bill_item">
		<columns names="item_id" ref-type="src-columns"/>
	</constraint>
</table>

<sequence name="current_pregnancy_pregnanacy_id_seq" cycle="false" start="1" increment="1" min-value="1" max-value="2147483647" cache="1">
	<schema name="public"/>
	<role name="postgres"/>
</sequence>

<table name="current_pregnancy" layers="0" collapse-mode="2" max-obj-count="13" z-value="0">
	<schema name="public"/>
	<role name="postgres"/>
	<position x="820" y="80"/>
	<column name="pregnanacy_id" not-null="true" sequence="public.current_pregnancy_pregnanacy_id_seq">
		<type name="integer" length="0"/>
	</column>
	<column name="patient_id" not-null="true">
		<type name="integer" length="0"/>
	</column>
	<column name="visit_id" not-null="true">
		<type name="integer" length="0"/>
	</column>
	<column name="multiple_pregnancy">
		<type name="boolean" length="0"/>
	</column>
	<column name="complications">
		<type name="text" length="0"/>
	</column>
	<column name="ultrasound_findings">
		<type name="text" length="0"/>
	</column>
	<column name="fetal_heart_rate_bpm">
		<type name="integer" length="0"/>
	</column>
	<column name="placenta_position">
		<type name="character varying" length="50"/>
	</column>
	<column name="presentation">
		<type name="character varying" length="50"/>
	</column>
	<column name="gestational_age_weeks">
		<type name="integer" length="0"/>
	</column>
	<column name="notes">
		<type name="text" length="0"/>
	</column>
	<constraint name="current_pregnancy_pkey" type="pk-constr" table="public.current_pregnancy">
		<columns names="pregnanacy_id" ref-type="src-columns"/>
	</constraint>
	<constraint name="uniqeue_visit_id_cp" type="uq-constr" table="public.current_pregnancy">
		<columns names="visit_id" ref-type="src-columns"/>
	</constraint>
</table>

<sequence name="doctor_doctor_id_seq" cycle="false" start="1" increment="1" min-value="1" max-value="2147483647" cache="1">
	<schema name="public"/>
	<role name="postgres"/>
</sequence>

<table name="doctor" layers="0" collapse-mode="2" max-obj-count="13" z-value="0">
	<schema name="public"/>
	<role name="postgres"/>
	<position x="1280" y="80"/>
	<column name="doctor_id" not-null="true" sequence="public.doctor_doctor_id_seq">
		<type name="integer" length="0"/>
	</column>
	<column name="user_code" not-null="true">
		<type name="character varying" length="50"/>
	</column>
	<column name="password" not-null="true">
		<type name="character varying" length="255"/>
	</column>
	<column name="doctor_name" not-null="true">
		<type name="character varying" length="50"/>
	</column>
	<column name="specialization" not-null="true">
		<type name="character varying" length="100"/>
	</column>
	<column name="education">
		<type name="character varying" length="255"/>
	</column>
	<column name="consultaion_fee" not-null="true">
		<type name="numeric" length="10" precision="2"/>
	</column>
	<column name="emergency_fee" not-null="true">
		<type name="numeric" length="10" precision="2"/>
	</column>
	<column name="contact_number">
		<type name="character varying" length="20"/>
	</column>
	<column name="email">
		<type name="character varying" length="100"/>
	</column>
	<column name="created_at" default-value="CURRENT_TIMESTAMP">
		<type name="timestamp" length="0"/>
	</column>
	<constraint name="doctor_pkey" type="pk-constr" table="public.doctor">
		<columns names="doctor_id" ref-type="src-columns"/>
	</constraint>
</table>

<sequence name="lab_order_order_id_seq" cycle="false" start="1" increment="1" min-value="1" max-value="2147483647" cache="1">
	<schema name="public"/>
	<role name="postgres"/>
</sequence>

<table name="lab_order" layers="0" collapse-mode="2" max-obj-count="14" z-value="0">
	<schema name="public"/>
	<role name="postgres"/>
	<position x="1720" y="80"/>
	<column name="order_id" not-null="true" sequence="public.lab_order_order_id_seq">
		<type name="integer" length="0"/>
	</column>
	<column name="visit_id" not-null="true">
		<type name="integer" length="0"/>
	</column>
	<column name="test_id" not-null="true">
		<type name="integer" length="0"/>
	</column>
	<column name="ordered_by" not-null="true">
		<type name="integer" length="0"/>
	</column>
	<column name="performed_by">
		<type name="integer" length="0"/>
	</column>
	<column name="status">
		<type name="character varying" length="100"/>
	</column>
	<column name="created_at" default-value="CURRENT_TIMESTAMP">
		<type name="timestamp" length="0"/>
	</column>
	<column name="urgency" not-null="true" default-value="'Routine'">
		<type name="character varying" length="50"/>
	</column>
	<column name="results_entered_at">
		<type name="timestamp" length="0"/>
	</column>
	<column name="results_entered_by">
		<type name="integer" length="0"/>
	</column>
	<column name="finalized_at">
		<type name="timestamp" length="0"/>
	</column>
	<column name="finalized_by">
		<type name="integer" length="0"/>
	</column>
	<constraint name="lab_order_status_check" type="ck-constr" table="public.lab_order">
			<expression> <![CDATA[((status)::text = ANY (ARRAY[('Pending'::character varying)::text, ('Performed'::character varying)::text, ('Completed'::character varying)::text]))]]> </expression>
	</constraint>
	<constraint name="lab_order_urgency_check" type="ck-constr" table="public.lab_order">
			<expression> <![CDATA[((urgency)::text = ANY (ARRAY[('STAT'::character varying)::text, ('Urgent'::character varying)::text, ('Routine'::character varying)::text, ('Timed'::character varying)::text]))]]> </expression>
	</constraint>
	<constraint name="lab_order_pkey" type="pk-constr" table="public.lab_order">
		<columns names="order_id" ref-type="src-columns"/>
	</constraint>
</table>

<sequence name="lab_result_result_id_seq" cycle="false" start="1" increment="1" min-value="1" max-value="2147483647" cache="1">
	<schema name="public"/>
	<role name="postgres"/>
</sequence>

<sequence name="lab_result_approvals_approval_id_seq" cycle="false" start="1" increment="1" min-value="1" max-value="2147483647" cache="1">
	<schema name="public"/>
	<role name="postgres"/>
</sequence>

<table name="lab_result_approvals" layers="0" collapse-mode="2" max-obj-count="8" z-value="0">
	<schema name="public"/>
	<role name="postgres"/>
	<position x="460" y="660"/>
	<column name="approval_id" not-null="true" sequence="public.lab_result_approvals_approval_id_seq">
		<type name="integer" length="0"/>
	</column>
	<column name="order_id" not-null="true">
		<type name="integer" length="0"/>
	</column>
	<column name="approved_by" not-null="true">
		<type name="integer" length="0"/>
	</column>
	<column name="approval_status" default-value="'pending'">
		<type name="character varying" length="20"/>
	</column>
	<column name="approval_notes">
		<type name="text" length="0"/>
	</column>
	<column name="approved_at" default-value="CURRENT_TIMESTAMP">
		<type name="timestamp" length="0"/>
	</column>
	<column name="signature_data">
		<type name="text" length="0"/>
	</column>
	<constraint name="lab_result_approvals_order_id_key" type="uq-constr" table="public.lab_result_approvals">
		<columns names="order_id" ref-type="src-columns"/>
	</constraint>
	<constraint name="lab_result_approvals_pkey" type="pk-constr" table="public.lab_result_approvals">
		<columns names="approval_id" ref-type="src-columns"/>
	</constraint>
</table>

<table name="lab_result" layers="0" collapse-mode="2" max-obj-count="6" z-value="0">
	<schema name="public"/>
	<role name="postgres"/>
	<position x="60" y="660"/>
	<column name="order_id" not-null="true">
		<type name="integer" length="0"/>
	</column>
	<column name="lab_result">
		<type name="text" length="0"/>
	</column>
	<column name="reported_by" not-null="true">
		<type name="integer" length="0"/>
	</column>
	<column name="reported_at" default-value="CURRENT_TIMESTAMP">
		<type name="timestamp" length="0"/>
	</column>
	<column name="result_id" not-null="true" sequence="public.lab_result_result_id_seq">
		<type name="integer" length="0"/>
	</column>
	<constraint name="lab_result_pkey" type="pk-constr" table="public.lab_result">
		<columns names="result_id" ref-type="src-columns"/>
	</constraint>
</table>

<table name="lab_test" layers="0" collapse-mode="2" max-obj-count="6" z-value="0">
	<schema name="public"/>
	<role name="postgres"/>
	<position x="960" y="660"/>
	<column name="test_id" not-null="true">
		<type name="integer" length="0"/>
	</column>
	<column name="test_name" not-null="true">
		<type name="character varying" length="100"/>
	</column>
	<column name="category">
		<type name="character varying" length="50"/>
	</column>
	<column name="price">
		<type name="numeric" length="10" precision="2"/>
	</column>
	<column name="description">
		<type name="text" length="0"/>
	</column>
	<constraint name="lab_test_pkey" type="pk-constr" table="public.lab_test">
		<columns names="test_id" ref-type="src-columns"/>
	</constraint>
</table>

<sequence name="lab_test_parameters_parameter_id_seq" cycle="false" start="1" increment="1" min-value="1" max-value="2147483647" cache="1">
	<schema name="public"/>
	<role name="postgres"/>
</sequence>

<table name="lab_test_parameters" layers="0" collapse-mode="2" max-obj-count="15" z-value="0">
	<schema name="public"/>
	<role name="postgres"/>
	<position x="1360" y="660"/>
	<column name="parameter_id" not-null="true" sequence="public.lab_test_parameters_parameter_id_seq">
		<type name="integer" length="0"/>
	</column>
	<column name="test_id" not-null="true">
		<type name="integer" length="0"/>
	</column>
	<column name="parameter_name" not-null="true">
		<type name="character varying" length="100"/>
	</column>
	<column name="parameter_code">
		<type name="character varying" length="50"/>
	</column>
	<column name="unit">
		<type name="character varying" length="50"/>
	</column>
	<column name="input_type" default-value="'number'">
		<type name="character varying" length="20"/>
	</column>
	<column name="reference_range_min">
		<type name="numeric" length="10" precision="2"/>
	</column>
	<column name="reference_range_max">
		<type name="numeric" length="10" precision="2"/>
	</column>
	<column name="reference_value_text">
		<type name="text" length="0"/>
	</column>
	<column name="display_order" default-value="0">
		<type name="integer" length="0"/>
	</column>
	<column name="is_critical" default-value="false">
		<type name="boolean" length="0"/>
	</column>
	<column name="is_required" default-value="true">
		<type name="boolean" length="0"/>
	</column>
	<column name="created_at" default-value="CURRENT_TIMESTAMP">
		<type name="timestamp" length="0"/>
	</column>
	<constraint name="lab_test_parameters_pkey" type="pk-constr" table="public.lab_test_parameters">
		<columns names="parameter_id" ref-type="src-columns"/>
	</constraint>
	<constraint name="lab_test_parameters_test_id_parameter_code_key" type="uq-constr" table="public.lab_test_parameters">
		<columns names="test_id,parameter_code" ref-type="src-columns"/>
	</constraint>
</table>

<sequence name="lab_test_results_result_id_seq" cycle="false" start="1" increment="1" min-value="1" max-value="2147483647" cache="1">
	<schema name="public"/>
	<role name="postgres"/>
</sequence>

<table name="lab_test_results" layers="0" collapse-mode="2" max-obj-count="12" z-value="0">
	<schema name="public"/>
	<role name="postgres"/>
	<position x="1920" y="660"/>
	<column name="result_id" not-null="true" sequence="public.lab_test_results_result_id_seq">
		<type name="integer" length="0"/>
	</column>
	<column name="order_id" not-null="true">
		<type name="integer" length="0"/>
	</column>
	<column name="parameter_id" not-null="true">
		<type name="integer" length="0"/>
	</column>
	<column name="result_value">
		<type name="character varying" length="255"/>
	</column>
	<column name="is_abnormal" default-value="false">
		<type name="boolean" length="0"/>
	</column>
	<column name="technician_notes">
		<type name="text" length="0"/>
	</column>
	<column name="entered_by">
		<type name="integer" length="0"/>
	</column>
	<column name="entered_at" default-value="CURRENT_TIMESTAMP">
		<type name="timestamp" length="0"/>
	</column>
	<column name="verified_by">
		<type name="integer" length="0"/>
	</column>
	<column name="verified_at">
		<type name="timestamp" length="0"/>
	</column>
	<constraint name="lab_test_results_order_id_parameter_id_key" type="uq-constr" table="public.lab_test_results">
		<columns names="order_id,parameter_id" ref-type="src-columns"/>
	</constraint>
	<constraint name="lab_test_results_pkey" type="pk-constr" table="public.lab_test_results">
		<columns names="result_id" ref-type="src-columns"/>
	</constraint>
</table>

<sequence name="medicine_medicine_id_seq" cycle="false" start="1" increment="1" min-value="1" max-value="2147483647" cache="1">
	<schema name="public"/>
	<role name="postgres"/>
</sequence>

<table name="medicine" layers="0" collapse-mode="2" max-obj-count="27" z-value="0">
	<schema name="public"/>
	<role name="postgres"/>
	<position x="-700" y="660"/>
	<column name="medicine_id" not-null="true" sequence="public.medicine_medicine_id_seq">
		<type name="integer" length="0"/>
	</column>
	<column name="generic_name" not-null="true">
		<type name="character varying" length="100"/>
	</column>
	<column name="brand_name" not-null="true">
		<type name="character varying" length="100"/>
	</column>
	<column name="category" not-null="true">
		<type name="character varying" length="100"/>
	</column>
	<column name="dosage_value">
		<type name="numeric" length="10" precision="2"/>
	</column>
	<column name="dosage_unit">
		<type name="character varying" length="20"/>
	</column>
	<column name="form">
		<type name="character varying" length="50"/>
	</column>
	<column name="stock_quantity" default-value="0">
		<type name="integer" length="0"/>
	</column>
	<column name="price">
		<type name="numeric" length="10" precision="2"/>
	</column>
	<column name="created_at" default-value="CURRENT_TIMESTAMP">
		<type name="timestamp" length="0"/>
	</column>
	<column name="barcode">
		<type name="character varying" length="50"/>
	</column>
	<column name="sku">
		<type name="character varying" length="50"/>
	</column>
	<column name="manufacturer">
		<type name="character varying" length="100"/>
	</column>
	<column name="min_stock_level" default-value="10">
		<type name="integer" length="0"/>
	</column>
	<column name="max_stock_level" default-value="1000">
		<type name="integer" length="0"/>
	</column>
	<column name="is_active" default-value="true">
		<type name="boolean" length="0"/>
	</column>
	<column name="requires_prescription" default-value="false">
		<type name="boolean" length="0"/>
	</column>
	<column name="search_vector">
		<type name="tsvector" length="0"/>
	</column>
	<column name="sub_unit">
		<type name="character varying" length="20"/>
	</column>
	<column name="sub_units_per_unit">
		<type name="integer" length="0"/>
	</column>
	<column name="sub_unit_price">
		<type name="numeric" length="10" precision="2"/>
	</column>
	<column name="allow_sub_unit_sale" default-value="false">
		<type name="boolean" length="0"/>
	</column>
	<column name="stock_sub_quantity" default-value="0">
		<type name="integer" length="0"/>
	</column>
	<constraint name="check_sub_quantity_valid" type="ck-constr" table="public.medicine">
			<expression> <![CDATA[((stock_sub_quantity >= 0) AND ((sub_units_per_unit IS NULL) OR (sub_units_per_unit = 0) OR (stock_sub_quantity < sub_units_per_unit)))]]> </expression>
	</constraint>
	<constraint name="medicine_barcode_key" type="uq-constr" table="public.medicine">
		<columns names="barcode" ref-type="src-columns"/>
	</constraint>
	<constraint name="medicine_pkey" type="pk-constr" table="public.medicine">
		<columns names="medicine_id" ref-type="src-columns"/>
	</constraint>
	<constraint name="medicine_sku_key" type="uq-constr" table="public.medicine">
		<columns names="sku" ref-type="src-columns"/>
	</constraint>
</table>

<sequence name="medicine_purchase_purchase_id_seq" cycle="false" start="1" increment="1" min-value="1" max-value="2147483647" cache="1">
	<schema name="public"/>
	<role name="postgres"/>
</sequence>

<sequence name="medicine_purchase_detail_id_seq" cycle="false" start="1" increment="1" min-value="1" max-value="2147483647" cache="1">
	<schema name="public"/>
	<role name="postgres"/>
</sequence>

<table name="medicine_purchase_detail" layers="0" collapse-mode="2" max-obj-count="9" z-value="0">
	<schema name="public"/>
	<role name="postgres"/>
	<position x="-620" y="3140"/>
	<column name="id" not-null="true" sequence="public.medicine_purchase_detail_id_seq">
		<type name="integer" length="0"/>
	</column>
	<column name="purchase_id" not-null="true">
		<type name="integer" length="0"/>
	</column>
	<column name="medicine_id" not-null="true">
		<type name="integer" length="0"/>
	</column>
	<column name="quantity" not-null="true">
		<type name="integer" length="0"/>
	</column>
	<column name="unit_cost">
		<type name="numeric" length="10" precision="2"/>
	</column>
	<column name="sub_quantity" default-value="0">
		<type name="integer" length="0"/>
	</column>
	<column name="sub_unit_cost" default-value="0">
		<type name="numeric" length="10" precision="1"/>
	</column>
	<column name="batch_id">
		<type name="integer" length="0"/>
	</column>
	<constraint name="medicine_purchase_detail_pkey" type="pk-constr" table="public.medicine_purchase_detail">
		<columns names="id" ref-type="src-columns"/>
	</constraint>
</table>

<table name="medicine_purchase" layers="0" collapse-mode="2" max-obj-count="9" z-value="0">
	<schema name="public"/>
	<role name="postgres"/>
	<position x="-260" y="2620"/>
	<column name="purchase_id" not-null="true" sequence="public.medicine_purchase_purchase_id_seq">
		<type name="integer" length="0"/>
	</column>
	<column name="party_id" not-null="true">
		<type name="integer" length="0"/>
	</column>
	<column name="invoice_no" not-null="true">
		<type name="character varying" length="100"/>
	</column>
	<column name="invoice_timestamp" default-value="CURRENT_TIMESTAMP">
		<type name="timestamp" length="0"/>
	</column>
	<column name="total_amount">
		<type name="numeric" length="10" precision="2"/>
	</column>
	<column name="payment_status">
		<type name="character varying" length="100"/>
	</column>
	<column name="created_at" default-value="CURRENT_TIMESTAMP">
		<type name="timestamp" length="0"/>
	</column>
	<column name="created_by">
		<type name="integer" length="0"/>
	</column>
	<constraint name="medicine_purchase_payment_status_check" type="ck-constr" table="public.medicine_purchase">
			<expression> <![CDATA[((payment_status)::text = ANY (ARRAY[('Paid'::character varying)::text, ('Unpaid'::character varying)::text, ('Partial'::character varying)::text]))]]> </expression>
	</constraint>
	<constraint name="medicine_purchase_pkey" type="pk-constr" table="public.medicine_purchase">
		<columns names="purchase_id" ref-type="src-columns"/>
	</constraint>
</table>

<sequence name="medicine_transaction_txn_id_seq" cycle="false" start="1" increment="1" min-value="1" max-value="2147483647" cache="1">
	<schema name="public"/>
	<role name="postgres"/>
</sequence>

<table name="medicine_transaction" layers="0" collapse-mode="2" max-obj-count="13" z-value="0">
	<schema name="public"/>
	<role name="postgres"/>
	<position x="-780" y="4620"/>
	<column name="txn_id" not-null="true" sequence="public.medicine_transaction_txn_id_seq">
		<type name="integer" length="0"/>
	</column>
	<column name="medicine_id" not-null="true">
		<type name="integer" length="0"/>
	</column>
	<column name="txn_type">
		<type name="character varying" length="100"/>
	</column>
	<column name="quantity" not-null="true">
		<type name="integer" length="0"/>
	</column>
	<column name="amount_per_unit" not-null="true">
		<type name="numeric" length="10" precision="2"/>
	</column>
	<column name="ref_purchase_id">
		<type name="integer" length="0"/>
	</column>
	<column name="ref_sale_id">
		<type name="integer" length="0"/>
	</column>
	<column name="ref_purchase_return">
		<type name="integer" length="0"/>
	</column>
	<column name="ref_sale_return">
		<type name="integer" length="0"/>
	</column>
	<column name="created_at" default-value="CURRENT_TIMESTAMP">
		<type name="timestamp" length="0"/>
	</column>
	<column name="sub_quantity" default-value="0">
		<type name="integer" length="0"/>
	</column>
	<constraint name="medicine_transaction_txn_type_check" type="ck-constr" table="public.medicine_transaction">
			<expression> <![CDATA[((txn_type)::text = ANY (ARRAY[('purchase'::character varying)::text, ('sale'::character varying)::text, ('purchase_return'::character varying)::text, ('sale_return'::character varying)::text, ('adjustment'::character varying)::text]))]]> </expression>
	</constraint>
	<constraint name="medicine_transaction_pkey" type="pk-constr" table="public.medicine_transaction">
		<columns names="txn_id" ref-type="src-columns"/>
	</constraint>
</table>

<sequence name="menstrual_history_menstrual_history_id_seq" cycle="false" start="1" increment="1" min-value="1" max-value="2147483647" cache="1">
	<schema name="public"/>
	<role name="postgres"/>
</sequence>

<table name="menstrual_history" layers="0" collapse-mode="2" max-obj-count="13" z-value="0">
	<schema name="public"/>
	<role name="postgres"/>
	<position x="2100" y="1160"/>
	<column name="menstrual_history_id" not-null="true" sequence="public.menstrual_history_menstrual_history_id_seq">
		<type name="integer" length="0"/>
	</column>
	<column name="patient_id" not-null="true">
		<type name="integer" length="0"/>
	</column>
	<column name="menarch_age">
		<type name="integer" length="0"/>
	</column>
	<column name="cycle_length_days">
		<type name="integer" length="0"/>
	</column>
	<column name="bleeding_days">
		<type name="integer" length="0"/>
	</column>
	<column name="menstrual_regular">
		<type name="boolean" length="0"/>
	</column>
	<column name="contraception_history">
		<type name="text" length="0"/>
	</column>
	<column name="gynecologic_surgeries">
		<type name="text" length="0"/>
	</column>
	<column name="medical_conditions">
		<type name="text" length="0"/>
	</column>
	<column name="menopause_status">
		<type name="boolean" length="0"/>
	</column>
	<column name="notes">
		<type name="text" length="0"/>
	</column>
	<constraint name="menstrual_history_pkey" type="pk-constr" table="public.menstrual_history">
		<columns names="menstrual_history_id" ref-type="src-columns"/>
	</constraint>
	<constraint name="uq_menstrual_history_patient_id" type="uq-constr" table="public.menstrual_history">
		<columns names="patient_id" ref-type="src-columns"/>
	</constraint>
</table>

<sequence name="obstetric_history_obstetric_history_id_seq" cycle="false" start="1" increment="1" min-value="1" max-value="2147483647" cache="1">
	<schema name="public"/>
	<role name="postgres"/>
</sequence>

<table name="obstetric_history" layers="0" collapse-mode="2" max-obj-count="12" z-value="0">
	<schema name="public"/>
	<role name="postgres"/>
	<position x="60" y="2000"/>
	<column name="obstetric_history_id" not-null="true" sequence="public.obstetric_history_obstetric_history_id_seq">
		<type name="integer" length="0"/>
	</column>
	<column name="patient_id" not-null="true">
		<type name="integer" length="0"/>
	</column>
	<column name="is_first_pregnancy">
		<type name="boolean" length="0"/>
	</column>
	<column name="married_years">
		<type name="integer" length="0"/>
	</column>
	<column name="gravida">
		<type name="integer" length="0"/>
	</column>
	<column name="para">
		<type name="integer" length="0"/>
	</column>
	<column name="abortions">
		<type name="integer" length="0"/>
	</column>
	<column name="edd">
		<type name="date" length="0"/>
	</column>
	<column name="last_menstrual_cycle">
		<type name="date" length="0"/>
	</column>
	<column name="notes">
		<type name="text" length="0"/>
	</column>
	<constraint name="obstetric_history_pkey" type="pk-constr" table="public.obstetric_history">
		<columns names="obstetric_history_id" ref-type="src-columns"/>
	</constraint>
	<constraint name="unique_patient_id_obs_history" type="uq-constr" table="public.obstetric_history">
		<columns names="patient_id" ref-type="src-columns"/>
	</constraint>
</table>

<sequence name="para_details_para_id_seq" cycle="false" start="1" increment="1" min-value="1" max-value="2147483647" cache="1">
	<schema name="public"/>
	<role name="postgres"/>
</sequence>

<table name="para_details" layers="0" collapse-mode="2" max-obj-count="14" z-value="0">
	<schema name="public"/>
	<role name="postgres"/>
	<position x="500" y="2000"/>
	<column name="para_id" not-null="true" sequence="public.para_details_para_id_seq">
		<type name="integer" length="0"/>
	</column>
	<column name="obstetric_history_id" not-null="true">
		<type name="integer" length="0"/>
	</column>
	<column name="para_number">
		<type name="integer" length="0"/>
	</column>
	<column name="birth_year">
		<type name="integer" length="0"/>
	</column>
	<column name="birth_month">
		<type name="integer" length="0"/>
	</column>
	<column name="gender">
		<type name="character varying" length="20"/>
	</column>
	<column name="delivery_type">
		<type name="character varying" length="50"/>
	</column>
	<column name="alive">
		<type name="boolean" length="0"/>
	</column>
	<column name="birth_weight_grams">
		<type name="integer" length="0"/>
	</column>
	<column name="complications">
		<type name="text" length="0"/>
	</column>
	<column name="notes">
		<type name="text" length="0"/>
	</column>
	<column name="gestational_age_weeks">
		<type name="integer" length="0"/>
	</column>
	<constraint name="para_details_gender_check" type="ck-constr" table="public.para_details">
			<expression> <![CDATA[((gender)::text = ANY (ARRAY[('Male'::character varying)::text, ('Female'::character varying)::text]))]]> </expression>
	</constraint>
	<constraint name="para_details_pkey" type="pk-constr" table="public.para_details">
		<columns names="para_id" ref-type="src-columns"/>
	</constraint>
	<constraint name="unique_obstetric_para" type="uq-constr" table="public.para_details">
		<columns names="obstetric_history_id,para_number" ref-type="src-columns"/>
	</constraint>
</table>

<sequence name="party_party_id_seq" cycle="false" start="1" increment="1" min-value="1" max-value="2147483647" cache="1">
	<schema name="public"/>
	<role name="postgres"/>
</sequence>

<table name="party" layers="0" collapse-mode="2" max-obj-count="6" z-value="0">
	<schema name="public"/>
	<role name="postgres"/>
	<position x="-1860" y="560"/>
	<column name="party_id" not-null="true" sequence="public.party_party_id_seq">
		<type name="integer" length="0"/>
	</column>
	<column name="name" not-null="true">
		<type name="character varying" length="100"/>
	</column>
	<column name="contact_number">
		<type name="character varying" length="200"/>
	</column>
	<column name="address">
		<type name="text" length="0"/>
	</column>
	<column name="created_at" default-value="CURRENT_TIMESTAMP">
		<type name="timestamp" length="0"/>
	</column>
	<constraint name="party_pkey" type="pk-constr" table="public.party">
		<columns names="party_id" ref-type="src-columns"/>
	</constraint>
</table>

<sequence name="patient_patient_id_seq" cycle="false" start="1" increment="1" min-value="1" max-value="2147483647" cache="1">
	<schema name="public"/>
	<role name="postgres"/>
</sequence>

<table name="patient" layers="0" collapse-mode="2" max-obj-count="9" z-value="0">
	<schema name="public"/>
	<role name="postgres"/>
	<position x="1420" y="2000"/>
	<column name="patient_id" not-null="true" sequence="public.patient_patient_id_seq">
		<type name="integer" length="0"/>
	</column>
	<column name="patient_name" not-null="true">
		<type name="character varying" length="100"/>
	</column>
	<column name="age">
		<type name="integer" length="0"/>
	</column>
	<column name="gender">
		<type name="character varying" length="26"/>
	</column>
	<column name="contact_number">
		<type name="character varying" length="20"/>
	</column>
	<column name="cnic">
		<type name="character varying" length="20"/>
	</column>
	<column name="address">
		<type name="text" length="0"/>
	</column>
	<column name="created_at" default-value="CURRENT_TIMESTAMP">
		<type name="timestamp" length="0"/>
	</column>
	<constraint name="patient_gender_check" type="ck-constr" table="public.patient">
			<expression> <![CDATA[((gender)::text = ANY (ARRAY[('Male'::character varying)::text, ('Female'::character varying)::text, ('Other'::character varying)::text]))]]> </expression>
	</constraint>
	<constraint name="patient_pkey" type="pk-constr" table="public.patient">
		<columns names="patient_id" ref-type="src-columns"/>
	</constraint>
</table>

<sequence name="patient_vitals_vital_id_seq" cycle="false" start="1" increment="1" min-value="1" max-value="2147483647" cache="1">
	<schema name="public"/>
	<role name="postgres"/>
</sequence>

<table name="patient_vitals" layers="0" collapse-mode="2" max-obj-count="10" z-value="0">
	<schema name="public"/>
	<role name="postgres"/>
	<position x="1860" y="2000"/>
	<column name="vital_id" not-null="true" sequence="public.patient_vitals_vital_id_seq">
		<type name="integer" length="0"/>
	</column>
	<column name="visit_id" not-null="true">
		<type name="integer" length="0"/>
	</column>
	<column name="blood_pressure">
		<type name="character varying" length="20"/>
	</column>
	<column name="heart_rate">
		<type name="integer" length="0"/>
	</column>
	<column name="temperature">
		<type name="integer" length="0"/>
	</column>
	<column name="weight">
		<type name="integer" length="0"/>
	</column>
	<column name="height">
		<type name="integer" length="0"/>
	</column>
	<column name="recorded_at" default-value="CURRENT_TIMESTAMP">
		<type name="timestamp" length="0"/>
	</column>
	<column name="blood_group">
		<type name="character varying" length="20"/>
	</column>
	<constraint name="patient_vitals_blood_group_check" type="ck-constr" table="public.patient_vitals">
			<expression> <![CDATA[((blood_group)::text = ANY (ARRAY[('A+'::character varying)::text, ('A-'::character varying)::text, ('B+'::character varying)::text, ('B-'::character varying)::text, ('O+'::character varying)::text, ('O-'::character varying)::text, ('AB+'::character varying)::text, ('AB-'::character varying)::text]))]]> </expression>
	</constraint>
	<constraint name="patient_vitals_pkey" type="pk-constr" table="public.patient_vitals">
		<columns names="vital_id" ref-type="src-columns"/>
	</constraint>
	<constraint name="unique_patient_vitals" type="uq-constr" table="public.patient_vitals">
		<columns names="visit_id" ref-type="src-columns"/>
	</constraint>
</table>

<sequence name="pharmacy_customer_customer_id_seq" cycle="false" start="1" increment="1" min-value="1" max-value="2147483647" cache="1">
	<schema name="public"/>
	<role name="postgres"/>
</sequence>

<table name="pharmacy_customer" layers="0" collapse-mode="2" max-obj-count="9" z-value="0">
	<schema name="public"/>
	<role name="postgres"/>
	<position x="-1460" y="960"/>
	<column name="customer_id" not-null="true" sequence="public.pharmacy_customer_customer_id_seq">
		<type name="integer" length="0"/>
	</column>
	<column name="name">
		<type name="character varying" length="100"/>
	</column>
	<column name="phone">
		<type name="character varying" length="20"/>
	</column>
	<column name="email">
		<type name="character varying" length="100"/>
	</column>
	<column name="address">
		<type name="text" length="0"/>
	</column>
	<column name="loyalty_points" default-value="0">
		<type name="integer" length="0"/>
	</column>
	<column name="created_at" default-value="CURRENT_TIMESTAMP">
		<type name="timestamp" length="0"/>
	</column>
	<column name="last_purchase_date">
		<type name="timestamp" length="0"/>
	</column>
	<constraint name="pharmacy_customer_phone_key" type="uq-constr" table="public.pharmacy_customer">
		<columns names="phone" ref-type="src-columns"/>
	</constraint>
	<constraint name="pharmacy_customer_pkey" type="pk-constr" table="public.pharmacy_customer">
		<columns names="customer_id" ref-type="src-columns"/>
	</constraint>
</table>

<sequence name="pharmacy_sale_sale_id_seq" cycle="false" start="1" increment="1" min-value="1" max-value="2147483647" cache="1">
	<schema name="public"/>
	<role name="postgres"/>
</sequence>

<sequence name="pharmacy_sale_detail_id_seq" cycle="false" start="1" increment="1" min-value="1" max-value="2147483647" cache="1">
	<schema name="public"/>
	<role name="postgres"/>
</sequence>

<table name="pharmacy_sale_detail" layers="0" collapse-mode="2" max-obj-count="13" z-value="0">
	<schema name="public"/>
	<role name="postgres"/>
	<position x="-1440" y="2320"/>
	<column name="pharmacy_sale_detail_id" not-null="true" sequence="public.pharmacy_sale_detail_id_seq">
		<type name="integer" length="0"/>
	</column>
	<column name="sale_id" not-null="true">
		<type name="integer" length="0"/>
	</column>
	<column name="medicine_id" not-null="true">
		<type name="integer" length="0"/>
	</column>
	<column name="quantity" not-null="true">
		<type name="integer" length="0"/>
	</column>
	<column name="unit_sale_price">
		<type name="numeric" length="10" precision="2"/>
	</column>
	<column name="line_total">
		<type name="numeric" length="10" precision="2"/>
	</column>
	<column name="discount_percent" default-value="0">
		<type name="numeric" length="5" precision="2"/>
	</column>
	<column name="discount_amount" default-value="0">
		<type name="numeric" length="10" precision="2"/>
	</column>
	<column name="sub_unit_sale_price">
		<type name="numeric" length="10" precision="2"/>
	</column>
	<column name="sub_quantity" default-value="0">
		<type name="integer" length="0"/>
	</column>
	<column name="batch_id">
		<type name="integer" length="0"/>
	</column>
	<constraint name="check_total_price" type="ck-constr" table="public.pharmacy_sale_detail">
			<expression> <![CDATA[(line_total = (((quantity)::numeric * unit_sale_price) - discount_amount))]]> </expression>
	</constraint>
	<constraint name="pharmacy_sale_detail_pkey" type="pk-constr" table="public.pharmacy_sale_detail">
		<columns names="pharmacy_sale_detail_id" ref-type="src-columns"/>
	</constraint>
</table>

<table name="pharmacy_sale" layers="0" collapse-mode="2" max-obj-count="22" z-value="0">
	<schema name="public"/>
	<role name="postgres"/>
	<position x="-560" y="1820"/>
	<column name="sale_id" not-null="true" sequence="public.pharmacy_sale_sale_id_seq">
		<type name="integer" length="0"/>
	</column>
	<column name="visit_id">
		<type name="integer" length="0"/>
	</column>
	<column name="bill_id">
		<type name="integer" length="0"/>
	</column>
	<column name="sale_timestamp" default-value="CURRENT_TIMESTAMP">
		<type name="timestamp" length="0"/>
	</column>
	<column name="handled_by" not-null="true">
		<type name="integer" length="0"/>
	</column>
	<column name="total_amount">
		<type name="numeric" length="10" precision="2"/>
	</column>
	<column name="status">
		<type name="character varying" length="100"/>
	</column>
	<column name="payment_type" default-value="'CASH'">
		<type name="character varying" length="50"/>
	</column>
	<column name="payment_reference">
		<type name="character varying" length="100"/>
	</column>
	<column name="paid_amount" default-value="0">
		<type name="numeric" length="10" precision="2"/>
	</column>
	<column name="due_amount" default-value="0">
		<type name="numeric" length="10" precision="2"/>
	</column>
	<column name="change_amount" default-value="0">
		<type name="numeric" length="10" precision="2"/>
	</column>
	<column name="discount_percent" default-value="0">
		<type name="numeric" length="5" precision="2"/>
	</column>
	<column name="discount_amount" default-value="0">
		<type name="numeric" length="10" precision="2"/>
	</column>
	<column name="tax_amount" default-value="0">
		<type name="numeric" length="10" precision="2"/>
	</column>
	<column name="is_prescription_sale" default-value="false">
		<type name="boolean" length="0"/>
	</column>
	<column name="prescription_id">
		<type name="integer" length="0"/>
	</column>
	<column name="notes">
		<type name="text" length="0"/>
	</column>
	<column name="customer_id">
		<type name="integer" length="0"/>
	</column>
	<constraint name="pharmacy_sale_payment_type_check" type="ck-constr" table="public.pharmacy_sale">
			<expression> <![CDATA[((payment_type)::text = ANY (ARRAY[('CASH'::character varying)::text, ('CARD'::character varying)::text, ('INSURANCE'::character varying)::text, ('MOBILE'::character varying)::text, ('SPLIT'::character varying)::text]))]]> </expression>
	</constraint>
	<constraint name="pharmacy_sale_status_check" type="ck-constr" table="public.pharmacy_sale">
			<expression> <![CDATA[((status)::text = ANY (ARRAY[('Completed'::character varying)::text, ('Returned'::character varying)::text, ('Cancelled'::character varying)::text]))]]> </expression>
	</constraint>
	<constraint name="pharmacy_sale_pkey" type="pk-constr" table="public.pharmacy_sale">
		<columns names="sale_id" ref-type="src-columns"/>
	</constraint>
</table>

<sequence name="pos_audit_log_log_id_seq" cycle="false" start="1" increment="1" min-value="1" max-value="2147483647" cache="1">
	<schema name="public"/>
	<role name="postgres"/>
</sequence>

<table name="pos_audit_log" layers="0" collapse-mode="2" max-obj-count="9" z-value="0">
	<schema name="public"/>
	<role name="postgres"/>
	<position x="1460" y="2500"/>
	<column name="log_id" not-null="true" sequence="public.pos_audit_log_log_id_seq">
		<type name="integer" length="0"/>
	</column>
	<column name="staff_id">
		<type name="integer" length="0"/>
	</column>
	<column name="action_type" not-null="true">
		<type name="character varying" length="50"/>
	</column>
	<column name="sale_id">
		<type name="integer" length="0"/>
	</column>
	<column name="description">
		<type name="text" length="0"/>
	</column>
	<column name="ip_address">
		<type name="character varying" length="50"/>
	</column>
	<column name="user_agent">
		<type name="text" length="0"/>
	</column>
	<column name="created_at" default-value="CURRENT_TIMESTAMP">
		<type name="timestamp" length="0"/>
	</column>
	<constraint name="pos_audit_log_pkey" type="pk-constr" table="public.pos_audit_log">
		<columns names="log_id" ref-type="src-columns"/>
	</constraint>
</table>

<sequence name="pos_held_transaction_hold_id_seq" cycle="false" start="1" increment="1" min-value="1" max-value="2147483647" cache="1">
	<schema name="public"/>
	<role name="postgres"/>
</sequence>

<sequence name="pos_held_transaction_detail_detail_id_seq" cycle="false" start="1" increment="1" min-value="1" max-value="2147483647" cache="1">
	<schema name="public"/>
	<role name="postgres"/>
</sequence>

<table name="pos_held_transaction_detail" layers="0" collapse-mode="2" max-obj-count="9" z-value="0">
	<schema name="public"/>
	<role name="postgres"/>
	<position x="60" y="3220"/>
	<column name="detail_id" not-null="true" sequence="public.pos_held_transaction_detail_detail_id_seq">
		<type name="integer" length="0"/>
	</column>
	<column name="hold_id" not-null="true">
		<type name="integer" length="0"/>
	</column>
	<column name="medicine_id" not-null="true">
		<type name="integer" length="0"/>
	</column>
	<column name="qty" not-null="true">
		<type name="integer" length="0"/>
	</column>
	<column name="sub_qty" default-value="0">
		<type name="integer" length="0"/>
	</column>
	<column name="unit_price" not-null="true">
		<type name="numeric" length="10" precision="2"/>
	</column>
	<column name="discount_percent" default-value="0">
		<type name="numeric" length="5" precision="2"/>
	</column>
	<column name="line_total" not-null="true">
		<type name="numeric" length="10" precision="2"/>
	</column>
	<constraint name="pos_held_transaction_detail_pkey" type="pk-constr" table="public.pos_held_transaction_detail">
		<columns names="detail_id" ref-type="src-columns"/>
	</constraint>
</table>

<table name="pos_held_transaction" layers="0" collapse-mode="2" max-obj-count="10" z-value="0">
	<schema name="public"/>
	<role name="postgres"/>
	<position x="1880" y="2500"/>
	<column name="hold_id" not-null="true" sequence="public.pos_held_transaction_hold_id_seq">
		<type name="integer" length="0"/>
	</column>
	<column name="staff_id" not-null="true">
		<type name="integer" length="0"/>
	</column>
	<column name="customer_name">
		<type name="character varying" length="100"/>
	</column>
	<column name="customer_phone">
		<type name="character varying" length="20"/>
	</column>
	<column name="hold_timestamp" default-value="CURRENT_TIMESTAMP">
		<type name="timestamp" length="0"/>
	</column>
	<column name="retrieved_timestamp">
		<type name="timestamp" length="0"/>
	</column>
	<column name="total_amount">
		<type name="numeric" length="10" precision="2"/>
	</column>
	<column name="status" default-value="'held'">
		<type name="character varying" length="20"/>
	</column>
	<column name="notes">
		<type name="text" length="0"/>
	</column>
	<constraint name="pos_held_status_check" type="ck-constr" table="public.pos_held_transaction">
			<expression> <![CDATA[((status)::text = ANY (ARRAY[('held'::character varying)::text, ('retrieved'::character varying)::text, ('cancelled'::character varying)::text]))]]> </expression>
	</constraint>
	<constraint name="pos_held_transaction_pkey" type="pk-constr" table="public.pos_held_transaction">
		<columns names="hold_id" ref-type="src-columns"/>
	</constraint>
</table>

<sequence name="pos_receipt_config_config_id_seq" cycle="false" start="1" increment="1" min-value="1" max-value="2147483647" cache="1">
	<schema name="public"/>
	<role name="postgres"/>
</sequence>

<table name="pos_receipt_config" layers="0" collapse-mode="2" max-obj-count="15" z-value="0">
	<schema name="public"/>
	<role name="postgres"/>
	<position x="580" y="3220"/>
	<column name="config_id" not-null="true" sequence="public.pos_receipt_config_config_id_seq">
		<type name="integer" length="0"/>
	</column>
	<column name="clinic_name" not-null="true">
		<type name="character varying" length="200"/>
	</column>
	<column name="clinic_address">
		<type name="text" length="0"/>
	</column>
	<column name="clinic_phone">
		<type name="character varying" length="50"/>
	</column>
	<column name="clinic_email">
		<type name="character varying" length="100"/>
	</column>
	<column name="tax_registration_number">
		<type name="character varying" length="50"/>
	</column>
	<column name="receipt_header">
		<type name="text" length="0"/>
	</column>
	<column name="receipt_footer">
		<type name="text" length="0"/>
	</column>
	<column name="logo_url">
		<type name="text" length="0"/>
	</column>
	<column name="printer_name">
		<type name="character varying" length="100"/>
	</column>
	<column name="paper_size" default-value="'80mm'">
		<type name="character varying" length="20"/>
	</column>
	<column name="is_active" default-value="true">
		<type name="boolean" length="0"/>
	</column>
	<column name="created_at" default-value="CURRENT_TIMESTAMP">
		<type name="timestamp" length="0"/>
	</column>
	<constraint name="pos_receipt_config_pkey" type="pk-constr" table="public.pos_receipt_config">
		<columns names="config_id" ref-type="src-columns"/>
	</constraint>
</table>

<sequence name="pos_session_session_id_seq" cycle="false" start="1" increment="1" min-value="1" max-value="2147483647" cache="1">
	<schema name="public"/>
	<role name="postgres"/>
</sequence>

<table name="pos_session" layers="0" collapse-mode="2" max-obj-count="14" z-value="0">
	<schema name="public"/>
	<role name="postgres"/>
	<position x="1080" y="3220"/>
	<column name="session_id" not-null="true" sequence="public.pos_session_session_id_seq">
		<type name="integer" length="0"/>
	</column>
	<column name="staff_id" not-null="true">
		<type name="integer" length="0"/>
	</column>
	<column name="opening_time" not-null="true" default-value="CURRENT_TIMESTAMP">
		<type name="timestamp" length="0"/>
	</column>
	<column name="closing_time">
		<type name="timestamp" length="0"/>
	</column>
	<column name="opening_balance" not-null="true" default-value="0">
		<type name="numeric" length="10" precision="2"/>
	</column>
	<column name="closing_balance">
		<type name="numeric" length="10" precision="2"/>
	</column>
	<column name="expected_balance">
		<type name="numeric" length="10" precision="2"/>
	</column>
	<column name="cash_sales_total" default-value="0">
		<type name="numeric" length="10" precision="2"/>
	</column>
	<column name="card_sales_total" default-value="0">
		<type name="numeric" length="10" precision="2"/>
	</column>
	<column name="total_sales_count" default-value="0">
		<type name="integer" length="0"/>
	</column>
	<column name="notes">
		<type name="text" length="0"/>
	</column>
	<column name="status" default-value="'open'">
		<type name="character varying" length="20"/>
	</column>
	<constraint name="pos_session_status_check" type="ck-constr" table="public.pos_session">
			<expression> <![CDATA[((status)::text = ANY (ARRAY[('open'::character varying)::text, ('closed'::character varying)::text]))]]> </expression>
	</constraint>
	<constraint name="pos_session_pkey" type="pk-constr" table="public.pos_session">
		<columns names="session_id" ref-type="src-columns"/>
	</constraint>
</table>

<sequence name="prescription_prescription_id_seq" cycle="false" start="1" increment="1" min-value="1" max-value="2147483647" cache="1">
	<schema name="public"/>
	<role name="postgres"/>
</sequence>

<sequence name="prescription_medicines_prescription_medicine_id_seq" cycle="false" start="1" increment="1" min-value="1" max-value="2147483647" cache="1">
	<schema name="public"/>
	<role name="postgres"/>
</sequence>

<table name="prescription_medicines" layers="0" collapse-mode="2" max-obj-count="16" z-value="0">
	<schema name="public"/>
	<role name="postgres"/>
	<position x="320" y="1140"/>
	<column name="prescription_medicine_id" not-null="true" sequence="public.prescription_medicines_prescription_medicine_id_seq">
		<type name="integer" length="0"/>
	</column>
	<column name="prescription_id" not-null="true">
		<type name="integer" length="0"/>
	</column>
	<column name="medicine_id" not-null="true">
		<type name="integer" length="0"/>
	</column>
	<column name="duration">
		<type name="character varying" length="50"/>
	</column>
	<column name="instructions">
		<type name="text" length="0"/>
	</column>
	<column name="dispensed_by">
		<type name="integer" length="0"/>
	</column>
	<column name="frequency">
		<type name="character varying" length="50"/>
	</column>
	<column name="prescribed_quantity">
		<type name="integer" length="0"/>
	</column>
	<column name="dispensed_quantity">
		<type name="integer" length="0"/>
	</column>
	<column name="dispensed_at" default-value="CURRENT_TIMESTAMP">
		<type name="timestamp" length="0"/>
	</column>
	<column name="created_at" default-value="CURRENT_TIMESTAMP">
		<type name="timestamp" length="0"/>
	</column>
	<column name="updated_at" default-value="CURRENT_TIMESTAMP">
		<type name="timestamp" length="0"/>
	</column>
	<column name="prescribed_sub_quantity" default-value="0">
		<type name="integer" length="0"/>
	</column>
	<column name="dispensed_sub_quantity" default-value="0">
		<type name="integer" length="0"/>
	</column>
	<constraint name="prescription_medicines_pkey" type="pk-constr" table="public.prescription_medicines">
		<columns names="prescription_medicine_id" ref-type="src-columns"/>
	</constraint>
</table>

<table name="prescription" layers="0" collapse-mode="2" max-obj-count="4" z-value="0">
	<schema name="public"/>
	<role name="postgres"/>
	<position x="1480" y="3220"/>
	<column name="prescription_id" not-null="true" sequence="public.prescription_prescription_id_seq">
		<type name="integer" length="0"/>
	</column>
	<column name="visit_id" not-null="true">
		<type name="integer" length="0"/>
	</column>
	<column name="doctor_id" not-null="true">
		<type name="integer" length="0"/>
	</column>
	<column name="created_at" default-value="CURRENT_TIMESTAMP">
		<type name="timestamp" length="0"/>
	</column>
	<constraint name="prescription_pkey" type="pk-constr" table="public.prescription">
		<columns names="prescription_id" ref-type="src-columns"/>
	</constraint>
	<constraint name="unique_visit_prescription" type="uq-constr" table="public.prescription">
		<columns names="visit_id" ref-type="src-columns"/>
	</constraint>
</table>

<sequence name="purchase_return_return_id_seq" cycle="false" start="1" increment="1" min-value="1" max-value="2147483647" cache="1">
	<schema name="public"/>
	<role name="postgres"/>
</sequence>

<sequence name="purchase_return_detail_id_seq" cycle="false" start="1" increment="1" min-value="1" max-value="2147483647" cache="1">
	<schema name="public"/>
	<role name="postgres"/>
</sequence>

<table name="purchase_return_detail" layers="0" collapse-mode="2" max-obj-count="8" z-value="0">
	<schema name="public"/>
	<role name="postgres"/>
	<position x="-1560" y="4000"/>
	<column name="id" not-null="true" sequence="public.purchase_return_detail_id_seq">
		<type name="integer" length="0"/>
	</column>
	<column name="return_id" not-null="true">
		<type name="integer" length="0"/>
	</column>
	<column name="medicine_id" not-null="true">
		<type name="integer" length="0"/>
	</column>
	<column name="quantity" not-null="true">
		<type name="integer" length="0"/>
	</column>
	<column name="sub_quantity" default-value="0">
		<type name="integer" length="0"/>
	</column>
	<column name="returned_unit_price">
		<type name="numeric" length="10" precision="2"/>
	</column>
	<column name="returned_sub_unit_price">
		<type name="numeric" length="10" precision="2"/>
	</column>
	<constraint name="purchase_return_detail_pkey" type="pk-constr" table="public.purchase_return_detail">
		<columns names="id" ref-type="src-columns"/>
	</constraint>
</table>

<table name="purchase_return" layers="0" collapse-mode="2" max-obj-count="6" z-value="0">
	<schema name="public"/>
	<role name="postgres"/>
	<position x="-1680" y="3480"/>
	<column name="return_id" not-null="true" sequence="public.purchase_return_return_id_seq">
		<type name="integer" length="0"/>
	</column>
	<column name="purchase_id" not-null="true">
		<type name="integer" length="0"/>
	</column>
	<column name="reason">
		<type name="text" length="0"/>
	</column>
	<column name="return_timestamp" default-value="CURRENT_TIMESTAMP">
		<type name="timestamp" length="0"/>
	</column>
	<column name="created_by" not-null="true">
		<type name="integer" length="0"/>
	</column>
	<constraint name="purchase_return_pkey" type="pk-constr" table="public.purchase_return">
		<columns names="return_id" ref-type="src-columns"/>
	</constraint>
</table>

<sequence name="sale_return_return_id_seq" cycle="false" start="1" increment="1" min-value="1" max-value="2147483647" cache="1">
	<schema name="public"/>
	<role name="postgres"/>
</sequence>

<sequence name="sale_return_detail_id_seq" cycle="false" start="1" increment="1" min-value="1" max-value="2147483647" cache="1">
	<schema name="public"/>
	<role name="postgres"/>
</sequence>

<table name="sale_return_detail" layers="0" collapse-mode="2" max-obj-count="6" z-value="0">
	<schema name="public"/>
	<role name="postgres"/>
	<position x="-860" y="4100"/>
	<column name="id" not-null="true" sequence="public.sale_return_detail_id_seq">
		<type name="integer" length="0"/>
	</column>
	<column name="return_id" not-null="true">
		<type name="integer" length="0"/>
	</column>
	<column name="medicine_id" not-null="true">
		<type name="integer" length="0"/>
	</column>
	<column name="qty" not-null="true">
		<type name="integer" length="0"/>
	</column>
	<column name="unit_price">
		<type name="numeric" length="10" precision="2"/>
	</column>
	<constraint name="sale_return_detail_pkey" type="pk-constr" table="public.sale_return_detail">
		<columns names="id" ref-type="src-columns"/>
	</constraint>
</table>

<table name="sale_return" layers="0" collapse-mode="2" max-obj-count="6" z-value="0">
	<schema name="public"/>
	<role name="postgres"/>
	<position x="-500" y="3640"/>
	<column name="return_id" not-null="true" sequence="public.sale_return_return_id_seq">
		<type name="integer" length="0"/>
	</column>
	<column name="sale_id" not-null="true">
		<type name="integer" length="0"/>
	</column>
	<column name="reason">
		<type name="text" length="0"/>
	</column>
	<column name="return_timestamp" default-value="CURRENT_TIMESTAMP">
		<type name="timestamp" length="0"/>
	</column>
	<column name="created_by" not-null="true">
		<type name="integer" length="0"/>
	</column>
	<constraint name="sale_return_pkey" type="pk-constr" table="public.sale_return">
		<columns names="return_id" ref-type="src-columns"/>
	</constraint>
</table>

<sequence name="staff_staff_id_seq" cycle="false" start="1" increment="1" min-value="1" max-value="2147483647" cache="1">
	<schema name="public"/>
	<role name="postgres"/>
</sequence>

<table name="staff" layers="0" collapse-mode="2" max-obj-count="10" z-value="0">
	<schema name="public"/>
	<role name="postgres"/>
	<position x="1900" y="3760"/>
	<column name="staff_id" not-null="true" sequence="public.staff_staff_id_seq">
		<type name="integer" length="0"/>
	</column>
	<column name="user_code" not-null="true">
		<type name="character varying" length="50"/>
	</column>
	<column name="password" not-null="true">
		<type name="character varying" length="255"/>
	</column>
	<column name="name" not-null="true">
		<type name="character varying" length="50"/>
	</column>
	<column name="role">
		<type name="character varying" length="50"/>
	</column>
	<column name="education">
		<type name="character varying" length="255"/>
	</column>
	<column name="contact_number">
		<type name="character varying" length="20"/>
	</column>
	<column name="email">
		<type name="character varying" length="100"/>
	</column>
	<column name="created_at" default-value="CURRENT_TIMESTAMP">
		<type name="timestamp" length="0"/>
	</column>
	<constraint name="staff_role_check" type="ck-constr" table="public.staff">
			<expression> <![CDATA[((role)::text = ANY (ARRAY[('Receptionist'::character varying)::text, ('Lab_Technician'::character varying)::text, ('Admin'::character varying)::text, ('Cashier'::character varying)::text, ('Pharmacist'::character varying)::text, ('Nurse'::character varying)::text]))]]> </expression>
	</constraint>
	<constraint name="staff_pkey" type="pk-constr" table="public.staff">
		<columns names="staff_id" ref-type="src-columns"/>
	</constraint>
</table>

<view name="v_daily_sales_summary" layers="0" collapse-mode="2" max-obj-count="1" z-value="0">
	<schema name="public"/>
	<role name="postgres"/>
	<position x="1420" y="4140"/>
	<reference object="public.pharmacy_sale" type="table" ref-name="pharmacy_sale" use-signature="true"/>
	<simplecol name="sale_date" type="date"/>
	<simplecol name="total_transactions" type="bigint"/>
	<simplecol name="total_sales" type="numeric"/>
	<simplecol name="total_discounts" type="numeric"/>
	<simplecol name="cash_sales" type="numeric"/>
	<simplecol name="card_sales" type="numeric"/>
	<simplecol name="prescription_sales" type="numeric"/>
	<simplecol name="otc_sales" type="numeric"/>
	<definition> <![CDATA[ SELECT date(sale_timestamp) AS sale_date,
    count(sale_id) AS total_transactions,
    sum(total_amount) AS total_sales,
    sum(discount_amount) AS total_discounts,
    sum(
        CASE
            WHEN ((payment_type)::text = 'CASH'::text) THEN total_amount
            ELSE (0)::numeric
        END) AS cash_sales,
    sum(
        CASE
            WHEN ((payment_type)::text = 'CARD'::text) THEN total_amount
            ELSE (0)::numeric
        END) AS card_sales,
    sum(
        CASE
            WHEN is_prescription_sale THEN total_amount
            ELSE (0)::numeric
        END) AS prescription_sales,
    sum(
        CASE
            WHEN (is_prescription_sale = false) THEN total_amount
            ELSE (0)::numeric
        END) AS otc_sales
   FROM pharmacy_sale ps
  WHERE ((status)::text = 'Completed'::text)
  GROUP BY (date(sale_timestamp))
  ORDER BY (date(sale_timestamp)) DESC;]]> </definition>
</view>

<relationship name="rel_v_daily_sales_summary_pharmacy_sale" type="reltv" layers="0"
	 custom-color="#6b76be"
	 src-table="public.v_daily_sales_summary"
	 dst-table="public.pharmacy_sale"
	 src-required="false" dst-required="false"/>

<view name="v_low_stock_medicines" layers="0" collapse-mode="2" max-obj-count="1" z-value="0">
	<schema name="public"/>
	<role name="postgres"/>
	<position x="1700" y="4140"/>
	<reference object="public.medicine" type="table" ref-name="medicine" use-signature="true"/>
	<simplecol name="medicine_id" type="integer"/>
	<simplecol name="generic_name" type="character varying(100)"/>
	<simplecol name="brand_name" type="character varying(100)"/>
	<simplecol name="stock_quantity" type="integer"/>
	<simplecol name="stock_sub_quantity" type="integer"/>
	<simplecol name="sub_units_per_unit" type="integer"/>
	<simplecol name="min_stock_level" type="integer"/>
	<simplecol name="total_sub_units" type="integer"/>
	<simplecol name="min_sub_units" type="integer"/>
	<simplecol name="stock_display" type="text"/>
	<definition> <![CDATA[ SELECT medicine_id,
    generic_name,
    brand_name,
    stock_quantity,
    stock_sub_quantity,
    sub_units_per_unit,
    min_stock_level,
    ((stock_quantity * COALESCE(sub_units_per_unit, 1)) + COALESCE(stock_sub_quantity, 0)) AS total_sub_units,
    (min_stock_level * COALESCE(sub_units_per_unit, 1)) AS min_sub_units,
        CASE
            WHEN ((sub_units_per_unit > 0) AND (stock_sub_quantity > 0)) THEN ((((((stock_quantity || ' '::text) || (COALESCE(form, 'units'::character varying))::text) || ' + '::text) || stock_sub_quantity) || ' '::text) || (COALESCE(sub_unit, 'sub-units'::character varying))::text)
            ELSE ((stock_quantity || ' '::text) || (COALESCE(form, 'units'::character varying))::text)
        END AS stock_display
   FROM medicine
  WHERE ((is_active = true) AND (((stock_quantity * COALESCE(sub_units_per_unit, 1)) + COALESCE(stock_sub_quantity, 0)) <= (min_stock_level * COALESCE(sub_units_per_unit, 1))))
  ORDER BY ((stock_quantity * COALESCE(sub_units_per_unit, 1)) + COALESCE(stock_sub_quantity, 0));]]> </definition>
</view>

<relationship name="rel_v_low_stock_medicines_medicine" type="reltv" layers="0"
	 custom-color="#898a96"
	 src-table="public.v_low_stock_medicines"
	 dst-table="public.medicine"
	 src-required="false" dst-required="false"/>

<sequence name="visit_visit_id_seq" cycle="false" start="1" increment="1" min-value="1" max-value="2147483647" cache="1">
	<schema name="public"/>
	<role name="postgres"/>
</sequence>

<sequence name="visit_status_history_visit_status_id_seq" cycle="false" start="1" increment="1" min-value="1" max-value="2147483647" cache="1">
	<schema name="public"/>
	<role name="postgres"/>
</sequence>

<table name="visit_status_history" layers="0" collapse-mode="2" max-obj-count="7" z-value="0">
	<schema name="public"/>
	<role name="postgres"/>
	<position x="440" y="4140"/>
	<column name="visit_status_id" not-null="true" sequence="public.visit_status_history_visit_status_id_seq">
		<type name="integer" length="0"/>
	</column>
	<column name="visit_id" not-null="true">
		<type name="integer" length="0"/>
	</column>
	<column name="status">
		<type name="character varying" length="100"/>
	</column>
	<column name="updated_by_doctor">
		<type name="integer" length="0"/>
	</column>
	<column name="updated_by_staff">
		<type name="integer" length="0"/>
	</column>
	<column name="updated_at" default-value="CURRENT_TIMESTAMP">
		<type name="timestamp" length="0"/>
	</column>
	<constraint name="visit_status_history_status_check" type="ck-constr" table="public.visit_status_history">
			<expression> <![CDATA[((status)::text = ANY (ARRAY[('waiting'::character varying)::text, ('seen_by_doctor'::character varying)::text, ('medicines_dispensed'::character varying)::text, ('lab_tests_done'::character varying)::text, ('payment_done'::character varying)::text, ('admitted'::character varying)::text, ('discharged'::character varying)::text]))]]> </expression>
	</constraint>
	<constraint name="visit_status_history_pkey" type="pk-constr" table="public.visit_status_history">
		<columns names="visit_status_id" ref-type="src-columns"/>
	</constraint>
</table>

<table name="visit" layers="0" collapse-mode="2" max-obj-count="10" z-value="0">
	<schema name="public"/>
	<role name="postgres"/>
	<position x="60" y="4140"/>
	<column name="visit_id" not-null="true" sequence="public.visit_visit_id_seq">
		<type name="integer" length="0"/>
	</column>
	<column name="patient_id" not-null="true">
		<type name="integer" length="0"/>
	</column>
	<column name="doctor_id" not-null="true">
		<type name="integer" length="0"/>
	</column>
	<column name="visit_timestamp" default-value="CURRENT_TIMESTAMP">
		<type name="timestamp" length="0"/>
	</column>
	<column name="visit_type">
		<type name="character varying" length="50"/>
	</column>
	<column name="clinic_number">
		<type name="integer" length="0"/>
	</column>
	<column name="status">
		<type name="character varying" length="50"/>
	</column>
	<column name="reason">
		<type name="text" length="0"/>
	</column>
	<column name="is_deleted" default-value="false">
		<type name="boolean" length="0"/>
	</column>
	<constraint name="visit_status_check" type="ck-constr" table="public.visit">
			<expression> <![CDATA[((status)::text = ANY (ARRAY[('waiting'::character varying)::text, ('seen_by_doctor'::character varying)::text, ('medicines_dispensed'::character varying)::text, ('lab_tests_done'::character varying)::text, ('payment_done'::character varying)::text, ('completed'::character varying)::text, ('admitted'::character varying)::text, ('discharged'::character varying)::text]))]]> </expression>
	</constraint>
	<constraint name="visit_visit_type_check" type="ck-constr" table="public.visit">
			<expression> <![CDATA[((visit_type)::text = ANY (ARRAY[('OPD'::character varying)::text, ('Emergency'::character varying)::text]))]]> </expression>
	</constraint>
	<constraint name="visit_pkey" type="pk-constr" table="public.visit">
		<columns names="visit_id" ref-type="src-columns"/>
	</constraint>
</table>

<index name="idx_medicine_active" table="public.medicine"
	 concurrent="false" unique="false" fast-update="false" buffering="false" nulls-not-distinct="false"
	 index-type="btree" factor="90">
		<idxelement use-sorting="false">
			<column name="is_active"/>
		</idxelement>
</index>

<index name="idx_medicine_barcode" table="public.medicine"
	 concurrent="false" unique="false" fast-update="false" buffering="false" nulls-not-distinct="false"
	 index-type="btree" factor="90">
		<idxelement use-sorting="false">
			<column name="barcode"/>
		</idxelement>
</index>

<index name="idx_medicine_search_vector" table="public.medicine"
	 concurrent="false" unique="false" fast-update="false" buffering="false" nulls-not-distinct="false"
	 index-type="gin" factor="0">
		<idxelement use-sorting="false">
			<column name="search_vector"/>
		</idxelement>
</index>

<index name="idx_medicine_sku" table="public.medicine"
	 concurrent="false" unique="false" fast-update="false" buffering="false" nulls-not-distinct="false"
	 index-type="btree" factor="90">
		<idxelement use-sorting="false">
			<column name="sku"/>
		</idxelement>
</index>

<index name="idx_pharmacy_customer_phone" table="public.pharmacy_customer"
	 concurrent="false" unique="false" fast-update="false" buffering="false" nulls-not-distinct="false"
	 index-type="btree" factor="90">
		<idxelement use-sorting="false">
			<column name="phone"/>
		</idxelement>
</index>

<index name="idx_pos_audit_created" table="public.pos_audit_log"
	 concurrent="false" unique="false" fast-update="false" buffering="false" nulls-not-distinct="false"
	 index-type="btree" factor="90">
		<idxelement use-sorting="false">
			<column name="created_at"/>
		</idxelement>
</index>

<index name="idx_pos_audit_staff" table="public.pos_audit_log"
	 concurrent="false" unique="false" fast-update="false" buffering="false" nulls-not-distinct="false"
	 index-type="btree" factor="90">
		<idxelement use-sorting="false">
			<column name="staff_id"/>
		</idxelement>
</index>

<index name="idx_pos_session_staff" table="public.pos_session"
	 concurrent="false" unique="false" fast-update="false" buffering="false" nulls-not-distinct="false"
	 index-type="btree" factor="90">
		<idxelement use-sorting="false">
			<column name="staff_id"/>
		</idxelement>
</index>

<index name="idx_pos_session_status" table="public.pos_session"
	 concurrent="false" unique="false" fast-update="false" buffering="false" nulls-not-distinct="false"
	 index-type="btree" factor="90">
		<idxelement use-sorting="false">
			<column name="status"/>
		</idxelement>
</index>

<index name="idx_visit_timestamp" table="public.visit"
	 concurrent="false" unique="false" fast-update="false" buffering="false" nulls-not-distinct="false"
	 index-type="btree" factor="90">
		<idxelement use-sorting="false">
			<column name="visit_timestamp"/>
		</idxelement>
</index>

<trigger name="medicine_search_vector_trigger" firing-type="BEFORE" per-line="true" constraint="false"
	 ins-event="true" del-event="false" upd-event="true" trunc-event="false"
	 table="public.medicine">
		<function signature="public.medicine_search_vector_update()"/>
</trigger>

<trigger name="tg_purchase_detail_to_txn" firing-type="AFTER" per-line="true" constraint="false"
	 ins-event="true" del-event="true" upd-event="true" trunc-event="false"
	 table="public.medicine_purchase_detail">
		<function signature="public.fn_tg_purchase_detail_to_txn()"/>
</trigger>

<trigger name="tg_purchase_return_detail_to_txn" firing-type="AFTER" per-line="true" constraint="false"
	 ins-event="true" del-event="true" upd-event="true" trunc-event="false"
	 table="public.purchase_return_detail">
		<function signature="public.fn_tg_purchase_return_detail_to_txn()"/>
</trigger>

<trigger name="tg_sale_detail_to_txn" firing-type="AFTER" per-line="true" constraint="false"
	 ins-event="true" del-event="true" upd-event="true" trunc-event="false"
	 table="public.pharmacy_sale_detail">
		<function signature="public.fn_tg_sale_detail_to_txn()"/>
</trigger>

<trigger name="tg_sale_return_detail_to_txn" firing-type="AFTER" per-line="true" constraint="false"
	 ins-event="true" del-event="true" upd-event="true" trunc-event="false"
	 table="public.sale_return_detail">
		<function signature="public.fn_tg_sale_return_detail_to_txn()"/>
</trigger>

<trigger name="tg_stockquantity_generic" firing-type="AFTER" per-line="true" constraint="false"
	 ins-event="true" del-event="true" upd-event="true" trunc-event="false"
	 table="public.medicine_transaction">
		<function signature="public.fn_tg_stockquantity_generic()"/>
</trigger>

<sequence name="medicine_batch_batch_id_seq" cycle="false" start="1" increment="1" min-value="1" max-value="2147483647" cache="1">
	<schema name="public"/>
	<role name="postgres"/>
</sequence>

<table name="medicine_batch" layers="0" collapse-mode="2" max-obj-count="14" z-value="0">
	<schema name="public"/>
	<role name="postgres"/>
	<position x="-2060" y="1600"/>
	<column name="batch_id" not-null="true" sequence="public.medicine_batch_batch_id_seq">
		<type name="integer" length="0"/>
	</column>
	<column name="medicine_id">
		<type name="integer" length="0"/>
	</column>
	<column name="stock_quantity">
		<type name="integer" length="0"/>
	</column>
	<column name="stock_sub_quantity">
		<type name="integer" length="0"/>
	</column>
	<column name="purchase_price">
		<type name="numeric" length="10" precision="2"/>
	</column>
	<column name="purchase_sub_unit_price">
		<type name="numeric" length="10" precision="2"/>
	</column>
	<column name="sale_price">
		<type name="numeric" length="10" precision="2"/>
	</column>
	<column name="sale_sub_unit_price">
		<type name="numeric" length="10" precision="2"/>
	</column>
	<column name="expiry_date">
		<type name="date" length="0"/>
	</column>
	<column name="batch_number">
		<type name="text" length="0"/>
	</column>
	<column name="received_date" default-value="now()">
		<type name="timestamp" length="0"/>
	</column>
	<column name="party_id">
		<type name="integer" length="0"/>
	</column>
	<constraint name="medicine_batch_pkey" type="pk-constr" table="public.medicine_batch">
		<columns names="batch_id" ref-type="src-columns"/>
	</constraint>
</table>

<constraint name="bill_patient_id_fkey" type="fk-constr" comparison-type="MATCH SIMPLE"
	 upd-action="NO ACTION" del-action="NO ACTION" ref-table="public.patient" table="public.bill">
	<columns names="patient_id" ref-type="src-columns"/>
	<columns names="patient_id" ref-type="dst-columns"/>
</constraint>

<constraint name="bill_visit_id_fkey" type="fk-constr" comparison-type="MATCH SIMPLE"
	 upd-action="NO ACTION" del-action="NO ACTION" ref-table="public.visit" table="public.bill">
	<columns names="visit_id" ref-type="src-columns"/>
	<columns names="visit_id" ref-type="dst-columns"/>
</constraint>

<constraint name="bill_item_bill_id_fkey" type="fk-constr" comparison-type="MATCH SIMPLE"
	 upd-action="NO ACTION" del-action="NO ACTION" ref-table="public.bill" table="public.bill_item">
	<columns names="bill_id" ref-type="src-columns"/>
	<columns names="bill_id" ref-type="dst-columns"/>
</constraint>

<constraint name="current_pregnancy_patient_id_fkey" type="fk-constr" comparison-type="MATCH SIMPLE"
	 upd-action="NO ACTION" del-action="NO ACTION" ref-table="public.patient" table="public.current_pregnancy">
	<columns names="patient_id" ref-type="src-columns"/>
	<columns names="patient_id" ref-type="dst-columns"/>
</constraint>

<constraint name="current_pregnancy_visit_id_fkey" type="fk-constr" comparison-type="MATCH SIMPLE"
	 upd-action="NO ACTION" del-action="NO ACTION" ref-table="public.visit" table="public.current_pregnancy">
	<columns names="visit_id" ref-type="src-columns"/>
	<columns names="visit_id" ref-type="dst-columns"/>
</constraint>

<constraint name="lab_order_finalized_by_fkey" type="fk-constr" comparison-type="MATCH SIMPLE"
	 upd-action="NO ACTION" del-action="NO ACTION" ref-table="public.staff" table="public.lab_order">
	<columns names="finalized_by" ref-type="src-columns"/>
	<columns names="staff_id" ref-type="dst-columns"/>
</constraint>

<constraint name="lab_order_ordered_by_fkey" type="fk-constr" comparison-type="MATCH SIMPLE"
	 upd-action="NO ACTION" del-action="NO ACTION" ref-table="public.doctor" table="public.lab_order">
	<columns names="ordered_by" ref-type="src-columns"/>
	<columns names="doctor_id" ref-type="dst-columns"/>
</constraint>

<constraint name="lab_order_performed_by_fkey" type="fk-constr" comparison-type="MATCH SIMPLE"
	 upd-action="NO ACTION" del-action="NO ACTION" ref-table="public.staff" table="public.lab_order">
	<columns names="performed_by" ref-type="src-columns"/>
	<columns names="staff_id" ref-type="dst-columns"/>
</constraint>

<constraint name="lab_order_results_entered_by_fkey" type="fk-constr" comparison-type="MATCH SIMPLE"
	 upd-action="NO ACTION" del-action="NO ACTION" ref-table="public.staff" table="public.lab_order">
	<columns names="results_entered_by" ref-type="src-columns"/>
	<columns names="staff_id" ref-type="dst-columns"/>
</constraint>

<constraint name="lab_order_test_id_fkey" type="fk-constr" comparison-type="MATCH SIMPLE"
	 upd-action="NO ACTION" del-action="NO ACTION" ref-table="public.lab_test" table="public.lab_order">
	<columns names="test_id" ref-type="src-columns"/>
	<columns names="test_id" ref-type="dst-columns"/>
</constraint>

<constraint name="lab_order_visit_id_fkey" type="fk-constr" comparison-type="MATCH SIMPLE"
	 upd-action="NO ACTION" del-action="NO ACTION" ref-table="public.visit" table="public.lab_order">
	<columns names="visit_id" ref-type="src-columns"/>
	<columns names="visit_id" ref-type="dst-columns"/>
</constraint>

<constraint name="lab_result_order_id_fkey" type="fk-constr" comparison-type="MATCH SIMPLE"
	 upd-action="NO ACTION" del-action="NO ACTION" ref-table="public.lab_order" table="public.lab_result">
	<columns names="order_id" ref-type="src-columns"/>
	<columns names="order_id" ref-type="dst-columns"/>
</constraint>

<constraint name="lab_result_reported_by_fkey" type="fk-constr" comparison-type="MATCH SIMPLE"
	 upd-action="NO ACTION" del-action="NO ACTION" ref-table="public.staff" table="public.lab_result">
	<columns names="reported_by" ref-type="src-columns"/>
	<columns names="staff_id" ref-type="dst-columns"/>
</constraint>

<constraint name="lab_result_approvals_approved_by_fkey" type="fk-constr" comparison-type="MATCH SIMPLE"
	 upd-action="NO ACTION" del-action="NO ACTION" ref-table="public.staff" table="public.lab_result_approvals">
	<columns names="approved_by" ref-type="src-columns"/>
	<columns names="staff_id" ref-type="dst-columns"/>
</constraint>

<constraint name="lab_result_approvals_order_id_fkey" type="fk-constr" comparison-type="MATCH SIMPLE"
	 upd-action="NO ACTION" del-action="NO ACTION" ref-table="public.lab_order" table="public.lab_result_approvals">
	<columns names="order_id" ref-type="src-columns"/>
	<columns names="order_id" ref-type="dst-columns"/>
</constraint>

<constraint name="lab_test_parameters_test_id_fkey" type="fk-constr" comparison-type="MATCH SIMPLE"
	 upd-action="NO ACTION" del-action="NO ACTION" ref-table="public.lab_test" table="public.lab_test_parameters">
	<columns names="test_id" ref-type="src-columns"/>
	<columns names="test_id" ref-type="dst-columns"/>
</constraint>

<constraint name="lab_test_results_entered_by_fkey" type="fk-constr" comparison-type="MATCH SIMPLE"
	 upd-action="NO ACTION" del-action="NO ACTION" ref-table="public.staff" table="public.lab_test_results">
	<columns names="entered_by" ref-type="src-columns"/>
	<columns names="staff_id" ref-type="dst-columns"/>
</constraint>

<constraint name="lab_test_results_order_id_fkey" type="fk-constr" comparison-type="MATCH SIMPLE"
	 upd-action="NO ACTION" del-action="NO ACTION" ref-table="public.lab_order" table="public.lab_test_results">
	<columns names="order_id" ref-type="src-columns"/>
	<columns names="order_id" ref-type="dst-columns"/>
</constraint>

<constraint name="lab_test_results_parameter_id_fkey" type="fk-constr" comparison-type="MATCH SIMPLE"
	 upd-action="NO ACTION" del-action="NO ACTION" ref-table="public.lab_test_parameters" table="public.lab_test_results">
	<columns names="parameter_id" ref-type="src-columns"/>
	<columns names="parameter_id" ref-type="dst-columns"/>
</constraint>

<constraint name="lab_test_results_verified_by_fkey" type="fk-constr" comparison-type="MATCH SIMPLE"
	 upd-action="NO ACTION" del-action="NO ACTION" ref-table="public.staff" table="public.lab_test_results">
	<columns names="verified_by" ref-type="src-columns"/>
	<columns names="staff_id" ref-type="dst-columns"/>
</constraint>

<constraint name="medicine_purchase_created_by_fkey" type="fk-constr" comparison-type="MATCH SIMPLE"
	 upd-action="NO ACTION" del-action="NO ACTION" ref-table="public.staff" table="public.medicine_purchase">
	<columns names="created_by" ref-type="src-columns"/>
	<columns names="staff_id" ref-type="dst-columns"/>
</constraint>

<constraint name="medicine_purchase_party_id_fkey" type="fk-constr" comparison-type="MATCH SIMPLE"
	 upd-action="NO ACTION" del-action="NO ACTION" ref-table="public.party" table="public.medicine_purchase">
	<columns names="party_id" ref-type="src-columns"/>
	<columns names="party_id" ref-type="dst-columns"/>
</constraint>

<constraint name="medicine_purchase_detail_medicine_id_fkey" type="fk-constr" comparison-type="MATCH SIMPLE"
	 upd-action="NO ACTION" del-action="NO ACTION" ref-table="public.medicine" table="public.medicine_purchase_detail">
	<columns names="medicine_id" ref-type="src-columns"/>
	<columns names="medicine_id" ref-type="dst-columns"/>
</constraint>

<constraint name="medicine_purchase_detail_purchase_id_fkey" type="fk-constr" comparison-type="MATCH SIMPLE"
	 upd-action="NO ACTION" del-action="NO ACTION" ref-table="public.medicine_purchase" table="public.medicine_purchase_detail">
	<columns names="purchase_id" ref-type="src-columns"/>
	<columns names="purchase_id" ref-type="dst-columns"/>
</constraint>

<constraint name="medicine_purchase_detail_batch_id_fkey" type="fk-constr" comparison-type="MATCH SIMPLE"
	 upd-action="NO ACTION" del-action="NO ACTION" ref-table="public.medicine_batch" table="public.medicine_purchase_detail">
	<columns names="batch_id" ref-type="src-columns"/>
	<columns names="batch_id" ref-type="dst-columns"/>
</constraint>

<constraint name="medicine_transaction_medicine_id_fkey" type="fk-constr" comparison-type="MATCH SIMPLE"
	 upd-action="NO ACTION" del-action="NO ACTION" ref-table="public.medicine" table="public.medicine_transaction">
	<columns names="medicine_id" ref-type="src-columns"/>
	<columns names="medicine_id" ref-type="dst-columns"/>
</constraint>

<constraint name="medicine_transaction_ref_purchase_id_fkey" type="fk-constr" comparison-type="MATCH SIMPLE"
	 upd-action="NO ACTION" del-action="NO ACTION" ref-table="public.medicine_purchase" table="public.medicine_transaction">
	<columns names="ref_purchase_id" ref-type="src-columns"/>
	<columns names="purchase_id" ref-type="dst-columns"/>
</constraint>

<constraint name="medicine_transaction_ref_purchase_return_fkey" type="fk-constr" comparison-type="MATCH SIMPLE"
	 upd-action="NO ACTION" del-action="NO ACTION" ref-table="public.purchase_return" table="public.medicine_transaction">
	<columns names="ref_purchase_return" ref-type="src-columns"/>
	<columns names="return_id" ref-type="dst-columns"/>
</constraint>

<constraint name="medicine_transaction_ref_sale_id_fkey" type="fk-constr" comparison-type="MATCH SIMPLE"
	 upd-action="NO ACTION" del-action="NO ACTION" ref-table="public.pharmacy_sale" table="public.medicine_transaction">
	<columns names="ref_sale_id" ref-type="src-columns"/>
	<columns names="sale_id" ref-type="dst-columns"/>
</constraint>

<constraint name="medicine_transaction_ref_sale_return_fkey" type="fk-constr" comparison-type="MATCH SIMPLE"
	 upd-action="NO ACTION" del-action="NO ACTION" ref-table="public.sale_return" table="public.medicine_transaction">
	<columns names="ref_sale_return" ref-type="src-columns"/>
	<columns names="return_id" ref-type="dst-columns"/>
</constraint>

<constraint name="menstrual_history_patient_id_fkey" type="fk-constr" comparison-type="MATCH SIMPLE"
	 upd-action="NO ACTION" del-action="NO ACTION" ref-table="public.patient" table="public.menstrual_history">
	<columns names="patient_id" ref-type="src-columns"/>
	<columns names="patient_id" ref-type="dst-columns"/>
</constraint>

<constraint name="obstetric_history_patient_id_fkey" type="fk-constr" comparison-type="MATCH SIMPLE"
	 upd-action="NO ACTION" del-action="NO ACTION" ref-table="public.patient" table="public.obstetric_history">
	<columns names="patient_id" ref-type="src-columns"/>
	<columns names="patient_id" ref-type="dst-columns"/>
</constraint>

<constraint name="para_details_obstetric_history_id_fkey" type="fk-constr" comparison-type="MATCH SIMPLE"
	 upd-action="NO ACTION" del-action="NO ACTION" ref-table="public.obstetric_history" table="public.para_details">
	<columns names="obstetric_history_id" ref-type="src-columns"/>
	<columns names="obstetric_history_id" ref-type="dst-columns"/>
</constraint>

<constraint name="patient_vitals_visit_id_fkey" type="fk-constr" comparison-type="MATCH SIMPLE"
	 upd-action="NO ACTION" del-action="CASCADE" ref-table="public.visit" table="public.patient_vitals">
	<columns names="visit_id" ref-type="src-columns"/>
	<columns names="visit_id" ref-type="dst-columns"/>
</constraint>

<constraint name="pharmacy_sale_bill_id_fkey" type="fk-constr" comparison-type="MATCH SIMPLE"
	 upd-action="NO ACTION" del-action="NO ACTION" ref-table="public.bill" table="public.pharmacy_sale">
	<columns names="bill_id" ref-type="src-columns"/>
	<columns names="bill_id" ref-type="dst-columns"/>
</constraint>

<constraint name="pharmacy_sale_customer_id_fkey" type="fk-constr" comparison-type="MATCH SIMPLE"
	 upd-action="NO ACTION" del-action="NO ACTION" ref-table="public.pharmacy_customer" table="public.pharmacy_sale">
	<columns names="customer_id" ref-type="src-columns"/>
	<columns names="customer_id" ref-type="dst-columns"/>
</constraint>

<constraint name="pharmacy_sale_handled_by_fkey" type="fk-constr" comparison-type="MATCH SIMPLE"
	 upd-action="NO ACTION" del-action="NO ACTION" ref-table="public.staff" table="public.pharmacy_sale">
	<columns names="handled_by" ref-type="src-columns"/>
	<columns names="staff_id" ref-type="dst-columns"/>
</constraint>

<constraint name="pharmacy_sale_prescription_id_fkey" type="fk-constr" comparison-type="MATCH SIMPLE"
	 upd-action="NO ACTION" del-action="NO ACTION" ref-table="public.prescription" table="public.pharmacy_sale">
	<columns names="prescription_id" ref-type="src-columns"/>
	<columns names="prescription_id" ref-type="dst-columns"/>
</constraint>

<constraint name="pharmacy_sale_visit_id_fkey" type="fk-constr" comparison-type="MATCH SIMPLE"
	 upd-action="NO ACTION" del-action="NO ACTION" ref-table="public.visit" table="public.pharmacy_sale">
	<columns names="visit_id" ref-type="src-columns"/>
	<columns names="visit_id" ref-type="dst-columns"/>
</constraint>

<constraint name="pharmacy_sale_detail_medicine_id_fkey" type="fk-constr" comparison-type="MATCH SIMPLE"
	 upd-action="NO ACTION" del-action="NO ACTION" ref-table="public.medicine" table="public.pharmacy_sale_detail">
	<columns names="medicine_id" ref-type="src-columns"/>
	<columns names="medicine_id" ref-type="dst-columns"/>
</constraint>

<constraint name="pharmacy_sale_detail_sale_id_fkey" type="fk-constr" comparison-type="MATCH SIMPLE"
	 upd-action="NO ACTION" del-action="NO ACTION" ref-table="public.pharmacy_sale" table="public.pharmacy_sale_detail">
	<columns names="sale_id" ref-type="src-columns"/>
	<columns names="sale_id" ref-type="dst-columns"/>
</constraint>

<constraint name="pharmacy_sale_detail_batch_id_fkey" type="fk-constr" comparison-type="MATCH SIMPLE"
	 upd-action="NO ACTION" del-action="NO ACTION" ref-table="public.medicine_batch" table="public.pharmacy_sale_detail">
	<columns names="batch_id" ref-type="src-columns"/>
	<columns names="batch_id" ref-type="dst-columns"/>
</constraint>

<constraint name="pos_audit_log_sale_id_fkey" type="fk-constr" comparison-type="MATCH SIMPLE"
	 upd-action="NO ACTION" del-action="NO ACTION" ref-table="public.pharmacy_sale" table="public.pos_audit_log">
	<columns names="sale_id" ref-type="src-columns"/>
	<columns names="sale_id" ref-type="dst-columns"/>
</constraint>

<constraint name="pos_audit_log_staff_id_fkey" type="fk-constr" comparison-type="MATCH SIMPLE"
	 upd-action="NO ACTION" del-action="NO ACTION" ref-table="public.staff" table="public.pos_audit_log">
	<columns names="staff_id" ref-type="src-columns"/>
	<columns names="staff_id" ref-type="dst-columns"/>
</constraint>

<constraint name="pos_held_transaction_staff_id_fkey" type="fk-constr" comparison-type="MATCH SIMPLE"
	 upd-action="NO ACTION" del-action="NO ACTION" ref-table="public.staff" table="public.pos_held_transaction">
	<columns names="staff_id" ref-type="src-columns"/>
	<columns names="staff_id" ref-type="dst-columns"/>
</constraint>

<constraint name="pos_held_transaction_detail_hold_id_fkey" type="fk-constr" comparison-type="MATCH SIMPLE"
	 upd-action="NO ACTION" del-action="CASCADE" ref-table="public.pos_held_transaction" table="public.pos_held_transaction_detail">
	<columns names="hold_id" ref-type="src-columns"/>
	<columns names="hold_id" ref-type="dst-columns"/>
</constraint>

<constraint name="pos_held_transaction_detail_medicine_id_fkey" type="fk-constr" comparison-type="MATCH SIMPLE"
	 upd-action="NO ACTION" del-action="NO ACTION" ref-table="public.medicine" table="public.pos_held_transaction_detail">
	<columns names="medicine_id" ref-type="src-columns"/>
	<columns names="medicine_id" ref-type="dst-columns"/>
</constraint>

<constraint name="pos_session_staff_id_fkey" type="fk-constr" comparison-type="MATCH SIMPLE"
	 upd-action="NO ACTION" del-action="NO ACTION" ref-table="public.staff" table="public.pos_session">
	<columns names="staff_id" ref-type="src-columns"/>
	<columns names="staff_id" ref-type="dst-columns"/>
</constraint>

<constraint name="prescription_doctor_id_fkey" type="fk-constr" comparison-type="MATCH SIMPLE"
	 upd-action="NO ACTION" del-action="NO ACTION" ref-table="public.doctor" table="public.prescription">
	<columns names="doctor_id" ref-type="src-columns"/>
	<columns names="doctor_id" ref-type="dst-columns"/>
</constraint>

<constraint name="prescription_visit_id_fkey" type="fk-constr" comparison-type="MATCH SIMPLE"
	 upd-action="NO ACTION" del-action="NO ACTION" ref-table="public.visit" table="public.prescription">
	<columns names="visit_id" ref-type="src-columns"/>
	<columns names="visit_id" ref-type="dst-columns"/>
</constraint>

<constraint name="prescription_medicines_dispensed_by_fkey" type="fk-constr" comparison-type="MATCH SIMPLE"
	 upd-action="NO ACTION" del-action="NO ACTION" ref-table="public.staff" table="public.prescription_medicines">
	<columns names="dispensed_by" ref-type="src-columns"/>
	<columns names="staff_id" ref-type="dst-columns"/>
</constraint>

<constraint name="prescription_medicines_medicine_id_fkey" type="fk-constr" comparison-type="MATCH SIMPLE"
	 upd-action="NO ACTION" del-action="NO ACTION" ref-table="public.medicine" table="public.prescription_medicines">
	<columns names="medicine_id" ref-type="src-columns"/>
	<columns names="medicine_id" ref-type="dst-columns"/>
</constraint>

<constraint name="prescription_medicines_prescription_id_fkey" type="fk-constr" comparison-type="MATCH SIMPLE"
	 upd-action="NO ACTION" del-action="NO ACTION" ref-table="public.prescription" table="public.prescription_medicines">
	<columns names="prescription_id" ref-type="src-columns"/>
	<columns names="prescription_id" ref-type="dst-columns"/>
</constraint>

<constraint name="purchase_return_created_by_fkey" type="fk-constr" comparison-type="MATCH SIMPLE"
	 upd-action="NO ACTION" del-action="NO ACTION" ref-table="public.staff" table="public.purchase_return">
	<columns names="created_by" ref-type="src-columns"/>
	<columns names="staff_id" ref-type="dst-columns"/>
</constraint>

<constraint name="purchase_return_purchase_id_fkey" type="fk-constr" comparison-type="MATCH SIMPLE"
	 upd-action="NO ACTION" del-action="NO ACTION" ref-table="public.medicine_purchase" table="public.purchase_return">
	<columns names="purchase_id" ref-type="src-columns"/>
	<columns names="purchase_id" ref-type="dst-columns"/>
</constraint>

<constraint name="purchase_return_detail_medicine_id_fkey" type="fk-constr" comparison-type="MATCH SIMPLE"
	 upd-action="NO ACTION" del-action="NO ACTION" ref-table="public.medicine" table="public.purchase_return_detail">
	<columns names="medicine_id" ref-type="src-columns"/>
	<columns names="medicine_id" ref-type="dst-columns"/>
</constraint>

<constraint name="purchase_return_detail_return_id_fkey" type="fk-constr" comparison-type="MATCH SIMPLE"
	 upd-action="NO ACTION" del-action="NO ACTION" ref-table="public.purchase_return" table="public.purchase_return_detail">
	<columns names="return_id" ref-type="src-columns"/>
	<columns names="return_id" ref-type="dst-columns"/>
</constraint>

<constraint name="sale_return_created_by_fkey" type="fk-constr" comparison-type="MATCH SIMPLE"
	 upd-action="NO ACTION" del-action="NO ACTION" ref-table="public.staff" table="public.sale_return">
	<columns names="created_by" ref-type="src-columns"/>
	<columns names="staff_id" ref-type="dst-columns"/>
</constraint>

<constraint name="sale_return_sale_id_fkey" type="fk-constr" comparison-type="MATCH SIMPLE"
	 upd-action="NO ACTION" del-action="NO ACTION" ref-table="public.pharmacy_sale" table="public.sale_return">
	<columns names="sale_id" ref-type="src-columns"/>
	<columns names="sale_id" ref-type="dst-columns"/>
</constraint>

<constraint name="sale_return_detail_medicine_id_fkey" type="fk-constr" comparison-type="MATCH SIMPLE"
	 upd-action="NO ACTION" del-action="NO ACTION" ref-table="public.medicine" table="public.sale_return_detail">
	<columns names="medicine_id" ref-type="src-columns"/>
	<columns names="medicine_id" ref-type="dst-columns"/>
</constraint>

<constraint name="sale_return_detail_return_id_fkey" type="fk-constr" comparison-type="MATCH SIMPLE"
	 upd-action="NO ACTION" del-action="NO ACTION" ref-table="public.sale_return" table="public.sale_return_detail">
	<columns names="return_id" ref-type="src-columns"/>
	<columns names="return_id" ref-type="dst-columns"/>
</constraint>

<constraint name="visit_doctor_id_fkey" type="fk-constr" comparison-type="MATCH SIMPLE"
	 upd-action="NO ACTION" del-action="NO ACTION" ref-table="public.doctor" table="public.visit">
	<columns names="doctor_id" ref-type="src-columns"/>
	<columns names="doctor_id" ref-type="dst-columns"/>
</constraint>

<constraint name="visit_patient_id_fkey" type="fk-constr" comparison-type="MATCH SIMPLE"
	 upd-action="NO ACTION" del-action="NO ACTION" ref-table="public.patient" table="public.visit">
	<columns names="patient_id" ref-type="src-columns"/>
	<columns names="patient_id" ref-type="dst-columns"/>
</constraint>

<constraint name="visit_status_history_updated_by_doctor_fkey" type="fk-constr" comparison-type="MATCH SIMPLE"
	 upd-action="NO ACTION" del-action="NO ACTION" ref-table="public.doctor" table="public.visit_status_history">
	<columns names="updated_by_doctor" ref-type="src-columns"/>
	<columns names="doctor_id" ref-type="dst-columns"/>
</constraint>

<constraint name="visit_status_history_updated_by_staff_fkey" type="fk-constr" comparison-type="MATCH SIMPLE"
	 upd-action="NO ACTION" del-action="NO ACTION" ref-table="public.staff" table="public.visit_status_history">
	<columns names="updated_by_staff" ref-type="src-columns"/>
	<columns names="staff_id" ref-type="dst-columns"/>
</constraint>

<constraint name="visit_status_history_visit_id_fkey" type="fk-constr" comparison-type="MATCH SIMPLE"
	 upd-action="NO ACTION" del-action="CASCADE" ref-table="public.visit" table="public.visit_status_history">
	<columns names="visit_id" ref-type="src-columns"/>
	<columns names="visit_id" ref-type="dst-columns"/>
</constraint>

<constraint name="medicine_batch_medicine_id_fkey" type="fk-constr" comparison-type="MATCH SIMPLE"
	 upd-action="NO ACTION" del-action="NO ACTION" ref-table="public.medicine" table="public.medicine_batch">
	<columns names="medicine_id" ref-type="src-columns"/>
	<columns names="medicine_id" ref-type="dst-columns"/>
</constraint>

<constraint name="medicine_batch_party_id_fkey" type="fk-constr" comparison-type="MATCH SIMPLE"
	 upd-action="NO ACTION" del-action="NO ACTION" ref-table="public.party" table="public.medicine_batch">
	<columns names="party_id" ref-type="src-columns"/>
	<columns names="party_id" ref-type="dst-columns"/>
</constraint>

<relationship name="rel_bill_patient" type="relfk" layers="0"
	 custom-color="#9af0f9"
	 src-table="public.bill"
	 dst-table="public.patient" reference-fk="bill_patient_id_fkey"
	 src-required="false" dst-required="true"/>

<relationship name="rel_bill_visit" type="relfk" layers="0"
	 custom-color="#de3914"
	 src-table="public.bill"
	 dst-table="public.visit" reference-fk="bill_visit_id_fkey"
	 src-required="false" dst-required="true"/>

<relationship name="rel_bill_item_bill" type="relfk" layers="0"
	 custom-color="#8a21c3"
	 src-table="public.bill_item"
	 dst-table="public.bill" reference-fk="bill_item_bill_id_fkey"
	 src-required="false" dst-required="true"/>

<relationship name="rel_current_pregnancy_patient" type="relfk" layers="0"
	 custom-color="#3b2f34"
	 src-table="public.current_pregnancy"
	 dst-table="public.patient" reference-fk="current_pregnancy_patient_id_fkey"
	 src-required="false" dst-required="true"/>

<relationship name="rel_current_pregnancy_visit" type="relfk" layers="0"
	 custom-color="#578876"
	 src-table="public.current_pregnancy"
	 dst-table="public.visit" reference-fk="current_pregnancy_visit_id_fkey"
	 src-required="false" dst-required="true"/>

<relationship name="rel_lab_order_staff" type="relfk" layers="0"
	 custom-color="#3b4e35"
	 src-table="public.lab_order"
	 dst-table="public.staff" reference-fk="lab_order_finalized_by_fkey"
	 src-required="false" dst-required="false"/>

<relationship name="rel_lab_order_doctor" type="relfk" layers="0"
	 custom-color="#dc7e90"
	 src-table="public.lab_order"
	 dst-table="public.doctor" reference-fk="lab_order_ordered_by_fkey"
	 src-required="false" dst-required="true"/>

<relationship name="rel_lab_order_staff1" type="relfk" layers="0"
	 custom-color="#07bb52"
	 src-table="public.lab_order"
	 dst-table="public.staff" reference-fk="lab_order_performed_by_fkey"
	 src-required="false" dst-required="false"/>

<relationship name="rel_lab_order_staff2" type="relfk" layers="0"
	 custom-color="#3bae7f"
	 src-table="public.lab_order"
	 dst-table="public.staff" reference-fk="lab_order_results_entered_by_fkey"
	 src-required="false" dst-required="false"/>

<relationship name="rel_lab_order_lab_test" type="relfk" layers="0"
	 custom-color="#9a5639"
	 src-table="public.lab_order"
	 dst-table="public.lab_test" reference-fk="lab_order_test_id_fkey"
	 src-required="false" dst-required="true"/>

<relationship name="rel_lab_order_visit" type="relfk" layers="0"
	 custom-color="#f29dbf"
	 src-table="public.lab_order"
	 dst-table="public.visit" reference-fk="lab_order_visit_id_fkey"
	 src-required="false" dst-required="true"/>

<relationship name="rel_lab_result_lab_order" type="relfk" layers="0"
	 custom-color="#c60c87"
	 src-table="public.lab_result"
	 dst-table="public.lab_order" reference-fk="lab_result_order_id_fkey"
	 src-required="false" dst-required="true"/>

<relationship name="rel_lab_result_staff" type="relfk" layers="0"
	 custom-color="#15bf22"
	 src-table="public.lab_result"
	 dst-table="public.staff" reference-fk="lab_result_reported_by_fkey"
	 src-required="false" dst-required="true"/>

<relationship name="rel_lab_result_approvals_staff" type="relfk" layers="0"
	 custom-color="#27a397"
	 src-table="public.lab_result_approvals"
	 dst-table="public.staff" reference-fk="lab_result_approvals_approved_by_fkey"
	 src-required="false" dst-required="true"/>

<relationship name="rel_lab_result_approvals_lab_order" type="relfk" layers="0"
	 custom-color="#1b16f0"
	 src-table="public.lab_result_approvals"
	 dst-table="public.lab_order" reference-fk="lab_result_approvals_order_id_fkey"
	 src-required="false" dst-required="true"/>

<relationship name="rel_lab_test_parameters_lab_test" type="relfk" layers="0"
	 custom-color="#7017cb"
	 src-table="public.lab_test_parameters"
	 dst-table="public.lab_test" reference-fk="lab_test_parameters_test_id_fkey"
	 src-required="false" dst-required="true"/>

<relationship name="rel_lab_test_results_staff" type="relfk" layers="0"
	 custom-color="#0e1bc1"
	 src-table="public.lab_test_results"
	 dst-table="public.staff" reference-fk="lab_test_results_entered_by_fkey"
	 src-required="false" dst-required="false"/>

<relationship name="rel_lab_test_results_lab_order" type="relfk" layers="0"
	 custom-color="#dace3b"
	 src-table="public.lab_test_results"
	 dst-table="public.lab_order" reference-fk="lab_test_results_order_id_fkey"
	 src-required="false" dst-required="true"/>

<relationship name="rel_lab_test_results_lab_test_parameters" type="relfk" layers="0"
	 custom-color="#da36e3"
	 src-table="public.lab_test_results"
	 dst-table="public.lab_test_parameters" reference-fk="lab_test_results_parameter_id_fkey"
	 src-required="false" dst-required="true"/>

<relationship name="rel_lab_test_results_staff1" type="relfk" layers="0"
	 custom-color="#9510f4"
	 src-table="public.lab_test_results"
	 dst-table="public.staff" reference-fk="lab_test_results_verified_by_fkey"
	 src-required="false" dst-required="false"/>

<relationship name="rel_medicine_purchase_staff" type="relfk" layers="0"
	 custom-color="#e1a6bf"
	 src-table="public.medicine_purchase"
	 dst-table="public.staff" reference-fk="medicine_purchase_created_by_fkey"
	 src-required="false" dst-required="false"/>

<relationship name="rel_medicine_purchase_party" type="relfk" layers="0"
	 custom-color="#e23fb2"
	 src-table="public.medicine_purchase"
	 dst-table="public.party" reference-fk="medicine_purchase_party_id_fkey"
	 src-required="false" dst-required="true"/>

<relationship name="rel_medicine_purchase_detail_medicine" type="relfk" layers="0"
	 custom-color="#0ec8aa"
	 src-table="public.medicine_purchase_detail"
	 dst-table="public.medicine" reference-fk="medicine_purchase_detail_medicine_id_fkey"
	 src-required="false" dst-required="true"/>

<relationship name="rel_medicine_purchase_detail_medicine_purchase" type="relfk" layers="0"
	 custom-color="#37d080"
	 src-table="public.medicine_purchase_detail"
	 dst-table="public.medicine_purchase" reference-fk="medicine_purchase_detail_purchase_id_fkey"
	 src-required="false" dst-required="true"/>

<relationship name="rel_medicine_purchase_detail_medicine_batch" type="relfk" layers="0"
	 custom-color="#7a544c"
	 src-table="public.medicine_purchase_detail"
	 dst-table="public.medicine_batch" reference-fk="medicine_purchase_detail_batch_id_fkey"
	 src-required="false" dst-required="false"/>

<relationship name="rel_medicine_transaction_medicine" type="relfk" layers="0"
	 custom-color="#1472cf"
	 src-table="public.medicine_transaction"
	 dst-table="public.medicine" reference-fk="medicine_transaction_medicine_id_fkey"
	 src-required="false" dst-required="true"/>

<relationship name="rel_medicine_transaction_medicine_purchase" type="relfk" layers="0"
	 custom-color="#fb4d5b"
	 src-table="public.medicine_transaction"
	 dst-table="public.medicine_purchase" reference-fk="medicine_transaction_ref_purchase_id_fkey"
	 src-required="false" dst-required="false"/>

<relationship name="rel_medicine_transaction_purchase_return" type="relfk" layers="0"
	 custom-color="#83ede0"
	 src-table="public.medicine_transaction"
	 dst-table="public.purchase_return" reference-fk="medicine_transaction_ref_purchase_return_fkey"
	 src-required="false" dst-required="false"/>

<relationship name="rel_medicine_transaction_pharmacy_sale" type="relfk" layers="0"
	 custom-color="#7ac6d6"
	 src-table="public.medicine_transaction"
	 dst-table="public.pharmacy_sale" reference-fk="medicine_transaction_ref_sale_id_fkey"
	 src-required="false" dst-required="false"/>

<relationship name="rel_medicine_transaction_sale_return" type="relfk" layers="0"
	 custom-color="#137787"
	 src-table="public.medicine_transaction"
	 dst-table="public.sale_return" reference-fk="medicine_transaction_ref_sale_return_fkey"
	 src-required="false" dst-required="false"/>

<relationship name="rel_menstrual_history_patient" type="relfk" layers="0"
	 custom-color="#0f811a"
	 src-table="public.menstrual_history"
	 dst-table="public.patient" reference-fk="menstrual_history_patient_id_fkey"
	 src-required="false" dst-required="true"/>

<relationship name="rel_obstetric_history_patient" type="relfk" layers="0"
	 custom-color="#d71c85"
	 src-table="public.obstetric_history"
	 dst-table="public.patient" reference-fk="obstetric_history_patient_id_fkey"
	 src-required="false" dst-required="true"/>

<relationship name="rel_para_details_obstetric_history" type="relfk" layers="0"
	 custom-color="#49451e"
	 src-table="public.para_details"
	 dst-table="public.obstetric_history" reference-fk="para_details_obstetric_history_id_fkey"
	 src-required="false" dst-required="true"/>

<relationship name="rel_patient_vitals_visit" type="relfk" layers="0"
	 custom-color="#3d3269"
	 src-table="public.patient_vitals"
	 dst-table="public.visit" reference-fk="patient_vitals_visit_id_fkey"
	 src-required="false" dst-required="true"/>

<relationship name="rel_pharmacy_sale_bill" type="relfk" layers="0"
	 custom-color="#a7b279"
	 src-table="public.pharmacy_sale"
	 dst-table="public.bill" reference-fk="pharmacy_sale_bill_id_fkey"
	 src-required="false" dst-required="false"/>

<relationship name="rel_pharmacy_sale_pharmacy_customer" type="relfk" layers="0"
	 custom-color="#3e259a"
	 src-table="public.pharmacy_sale"
	 dst-table="public.pharmacy_customer" reference-fk="pharmacy_sale_customer_id_fkey"
	 src-required="false" dst-required="false"/>

<relationship name="rel_pharmacy_sale_staff" type="relfk" layers="0"
	 custom-color="#de180c"
	 src-table="public.pharmacy_sale"
	 dst-table="public.staff" reference-fk="pharmacy_sale_handled_by_fkey"
	 src-required="false" dst-required="true"/>

<relationship name="rel_pharmacy_sale_prescription" type="relfk" layers="0"
	 custom-color="#fbeb6b"
	 src-table="public.pharmacy_sale"
	 dst-table="public.prescription" reference-fk="pharmacy_sale_prescription_id_fkey"
	 src-required="false" dst-required="false"/>

<relationship name="rel_pharmacy_sale_visit" type="relfk" layers="0"
	 custom-color="#a347de"
	 src-table="public.pharmacy_sale"
	 dst-table="public.visit" reference-fk="pharmacy_sale_visit_id_fkey"
	 src-required="false" dst-required="false"/>

<relationship name="rel_pharmacy_sale_detail_medicine" type="relfk" layers="0"
	 custom-color="#222d82"
	 src-table="public.pharmacy_sale_detail"
	 dst-table="public.medicine" reference-fk="pharmacy_sale_detail_medicine_id_fkey"
	 src-required="false" dst-required="true"/>

<relationship name="rel_pharmacy_sale_detail_pharmacy_sale" type="relfk" layers="0"
	 custom-color="#a65f9e"
	 src-table="public.pharmacy_sale_detail"
	 dst-table="public.pharmacy_sale" reference-fk="pharmacy_sale_detail_sale_id_fkey"
	 src-required="false" dst-required="true"/>

<relationship name="rel_pharmacy_sale_detail_medicine_batch" type="relfk" layers="0"
	 custom-color="#608ae8"
	 src-table="public.pharmacy_sale_detail"
	 dst-table="public.medicine_batch" reference-fk="pharmacy_sale_detail_batch_id_fkey"
	 src-required="false" dst-required="false"/>

<relationship name="rel_pos_audit_log_pharmacy_sale" type="relfk" layers="0"
	 custom-color="#b4f52a"
	 src-table="public.pos_audit_log"
	 dst-table="public.pharmacy_sale" reference-fk="pos_audit_log_sale_id_fkey"
	 src-required="false" dst-required="false"/>

<relationship name="rel_pos_audit_log_staff" type="relfk" layers="0"
	 custom-color="#279535"
	 src-table="public.pos_audit_log"
	 dst-table="public.staff" reference-fk="pos_audit_log_staff_id_fkey"
	 src-required="false" dst-required="false"/>

<relationship name="rel_pos_held_transaction_staff" type="relfk" layers="0"
	 custom-color="#df7c03"
	 src-table="public.pos_held_transaction"
	 dst-table="public.staff" reference-fk="pos_held_transaction_staff_id_fkey"
	 src-required="false" dst-required="true"/>

<relationship name="rel_pos_held_transaction_detail_pos_held_transaction" type="relfk" layers="0"
	 custom-color="#87fbbb"
	 src-table="public.pos_held_transaction_detail"
	 dst-table="public.pos_held_transaction" reference-fk="pos_held_transaction_detail_hold_id_fkey"
	 src-required="false" dst-required="true"/>

<relationship name="rel_pos_held_transaction_detail_medicine" type="relfk" layers="0"
	 custom-color="#d7aadf"
	 src-table="public.pos_held_transaction_detail"
	 dst-table="public.medicine" reference-fk="pos_held_transaction_detail_medicine_id_fkey"
	 src-required="false" dst-required="true"/>

<relationship name="rel_pos_session_staff" type="relfk" layers="0"
	 custom-color="#b2d20d"
	 src-table="public.pos_session"
	 dst-table="public.staff" reference-fk="pos_session_staff_id_fkey"
	 src-required="false" dst-required="true"/>

<relationship name="rel_prescription_doctor" type="relfk" layers="0"
	 custom-color="#87cd75"
	 src-table="public.prescription"
	 dst-table="public.doctor" reference-fk="prescription_doctor_id_fkey"
	 src-required="false" dst-required="true"/>

<relationship name="rel_prescription_visit" type="relfk" layers="0"
	 custom-color="#1d8fa7"
	 src-table="public.prescription"
	 dst-table="public.visit" reference-fk="prescription_visit_id_fkey"
	 src-required="false" dst-required="true"/>

<relationship name="rel_prescription_medicines_staff" type="relfk" layers="0"
	 custom-color="#0bba30"
	 src-table="public.prescription_medicines"
	 dst-table="public.staff" reference-fk="prescription_medicines_dispensed_by_fkey"
	 src-required="false" dst-required="false"/>

<relationship name="rel_prescription_medicines_medicine" type="relfk" layers="0"
	 custom-color="#3e2fa7"
	 src-table="public.prescription_medicines"
	 dst-table="public.medicine" reference-fk="prescription_medicines_medicine_id_fkey"
	 src-required="false" dst-required="true"/>

<relationship name="rel_prescription_medicines_prescription" type="relfk" layers="0"
	 custom-color="#2d1b3c"
	 src-table="public.prescription_medicines"
	 dst-table="public.prescription" reference-fk="prescription_medicines_prescription_id_fkey"
	 src-required="false" dst-required="true"/>

<relationship name="rel_purchase_return_staff" type="relfk" layers="0"
	 custom-color="#ea5a1a"
	 src-table="public.purchase_return"
	 dst-table="public.staff" reference-fk="purchase_return_created_by_fkey"
	 src-required="false" dst-required="true"/>

<relationship name="rel_purchase_return_medicine_purchase" type="relfk" layers="0"
	 custom-color="#379c8c"
	 src-table="public.purchase_return"
	 dst-table="public.medicine_purchase" reference-fk="purchase_return_purchase_id_fkey"
	 src-required="false" dst-required="true"/>

<relationship name="rel_purchase_return_detail_medicine" type="relfk" layers="0"
	 custom-color="#edcc78"
	 src-table="public.purchase_return_detail"
	 dst-table="public.medicine" reference-fk="purchase_return_detail_medicine_id_fkey"
	 src-required="false" dst-required="true"/>

<relationship name="rel_purchase_return_detail_purchase_return" type="relfk" layers="0"
	 custom-color="#497ed3"
	 src-table="public.purchase_return_detail"
	 dst-table="public.purchase_return" reference-fk="purchase_return_detail_return_id_fkey"
	 src-required="false" dst-required="true"/>

<relationship name="rel_sale_return_staff" type="relfk" layers="0"
	 custom-color="#aa50e2"
	 src-table="public.sale_return"
	 dst-table="public.staff" reference-fk="sale_return_created_by_fkey"
	 src-required="false" dst-required="true"/>

<relationship name="rel_sale_return_pharmacy_sale" type="relfk" layers="0"
	 custom-color="#acdfb8"
	 src-table="public.sale_return"
	 dst-table="public.pharmacy_sale" reference-fk="sale_return_sale_id_fkey"
	 src-required="false" dst-required="true"/>

<relationship name="rel_sale_return_detail_medicine" type="relfk" layers="0"
	 custom-color="#d4fb3f"
	 src-table="public.sale_return_detail"
	 dst-table="public.medicine" reference-fk="sale_return_detail_medicine_id_fkey"
	 src-required="false" dst-required="true"/>

<relationship name="rel_sale_return_detail_sale_return" type="relfk" layers="0"
	 custom-color="#5a2e1a"
	 src-table="public.sale_return_detail"
	 dst-table="public.sale_return" reference-fk="sale_return_detail_return_id_fkey"
	 src-required="false" dst-required="true"/>

<relationship name="rel_visit_doctor" type="relfk" layers="0"
	 custom-color="#dc8311"
	 src-table="public.visit"
	 dst-table="public.doctor" reference-fk="visit_doctor_id_fkey"
	 src-required="false" dst-required="true"/>

<relationship name="rel_visit_patient" type="relfk" layers="0"
	 custom-color="#c95c5f"
	 src-table="public.visit"
	 dst-table="public.patient" reference-fk="visit_patient_id_fkey"
	 src-required="false" dst-required="true"/>

<relationship name="rel_visit_status_history_doctor" type="relfk" layers="0"
	 custom-color="#12850b"
	 src-table="public.visit_status_history"
	 dst-table="public.doctor" reference-fk="visit_status_history_updated_by_doctor_fkey"
	 src-required="false" dst-required="false"/>

<relationship name="rel_visit_status_history_staff" type="relfk" layers="0"
	 custom-color="#c3ffce"
	 src-table="public.visit_status_history"
	 dst-table="public.staff" reference-fk="visit_status_history_updated_by_staff_fkey"
	 src-required="false" dst-required="false"/>

<relationship name="rel_visit_status_history_visit" type="relfk" layers="0"
	 custom-color="#4a0e0f"
	 src-table="public.visit_status_history"
	 dst-table="public.visit" reference-fk="visit_status_history_visit_id_fkey"
	 src-required="false" dst-required="true"/>

<relationship name="rel_medicine_batch_medicine" type="relfk" layers="0"
	 custom-color="#ff2af5"
	 src-table="public.medicine_batch"
	 dst-table="public.medicine" reference-fk="medicine_batch_medicine_id_fkey"
	 src-required="false" dst-required="false"/>

<relationship name="rel_medicine_batch_party" type="relfk" layers="0"
	 custom-color="#a697f0"
	 src-table="public.medicine_batch"
	 dst-table="public.party" reference-fk="medicine_batch_party_id_fkey"
	 src-required="false" dst-required="false"/>

</dbmodel>
